<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Magnus Johansson">
<meta name="dcterms.date" content="2023-09-28">
<title>R, Rasch, etc - Using Rasch and WLS to account for measurement uncertainties in regression models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="R, Rasch, etc - Using Rasch and WLS to account for measurement uncertainties in regression models">
<meta property="og:description" content="There are several reasons for putting this blog post together.">
<meta property="og:site-name" content="R, Rasch, etc">
<meta name="twitter:title" content="R, Rasch, etc - Using Rasch and WLS to account for measurement uncertainties in regression models">
<meta name="twitter:description" content="There are several reasons for putting this blog post together.">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R, Rasch, etc</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./raschrvignette/RaschRvign.html">
 <span class="menu-text">RISEkbmRasch vignette</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blog" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blog</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-blog">
<li>
    <a class="dropdown-item" href="./parameterizedQ.html">
 <span class="dropdown-text">Automating reports with Quarto</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./latentResp/LatentResponse.html">
 <span class="dropdown-text">What’s in a latent trait score?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./SkolverketAPI/skolverketapi.html">
 <span class="dropdown-text">Data retrieval with R using API calls</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./powerviz.html">
 <span class="dropdown-text">Power analysis for multilevel models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./datawrangling.html">
 <span class="dropdown-text">Data wrangling for psychometrics in R</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pgmj/pgmj.github.io"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="toc-section-number">2</span>  Data</a></li>
  <li><a href="#measurement-properties-for-the-two-scales" id="toc-measurement-properties-for-the-two-scales" class="nav-link" data-scroll-target="#measurement-properties-for-the-two-scales"><span class="toc-section-number">3</span>  Measurement properties for the two scales</a></li>
  <li>
<a href="#estimating-person-scorelocations" id="toc-estimating-person-scorelocations" class="nav-link" data-scroll-target="#estimating-person-scorelocations"><span class="toc-section-number">4</span>  Estimating person score/locations</a>
  <ul class="collapse">
<li><a href="#plot-relationship-ordinalinterval" id="toc-plot-relationship-ordinalinterval" class="nav-link" data-scroll-target="#plot-relationship-ordinalinterval"><span class="toc-section-number">4.1</span>  Plot relationship ordinal/interval</a></li>
  <li><a href="#estimating-measurement-uncertainties-sem" id="toc-estimating-measurement-uncertainties-sem" class="nav-link" data-scroll-target="#estimating-measurement-uncertainties-sem"><span class="toc-section-number">4.2</span>  Estimating measurement uncertainties (SEM)</a></li>
  </ul>
</li>
  <li>
<a href="#sec-viz" id="toc-sec-viz" class="nav-link" data-scroll-target="#sec-viz"><span class="toc-section-number">5</span>  Visualizing data</a>
  <ul class="collapse">
<li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms"><span class="toc-section-number">5.1</span>  Histograms</a></li>
  <li><a href="#measurement-uncertainty" id="toc-measurement-uncertainty" class="nav-link" data-scroll-target="#measurement-uncertainty"><span class="toc-section-number">5.2</span>  Measurement uncertainty</a></li>
  <li><a href="#scatter-plots" id="toc-scatter-plots" class="nav-link" data-scroll-target="#scatter-plots"><span class="toc-section-number">5.3</span>  Scatter plots</a></li>
  </ul>
</li>
  <li><a href="#relationship-ordinalinterval-score" id="toc-relationship-ordinalinterval-score" class="nav-link" data-scroll-target="#relationship-ordinalinterval-score"><span class="toc-section-number">6</span>  Relationship ordinal/interval score</a></li>
  <li><a href="#standardizing-predictor" id="toc-standardizing-predictor" class="nav-link" data-scroll-target="#standardizing-predictor"><span class="toc-section-number">7</span>  Standardizing predictor</a></li>
  <li><a href="#weights-for-wls-regression" id="toc-weights-for-wls-regression" class="nav-link" data-scroll-target="#weights-for-wls-regression"><span class="toc-section-number">8</span>  Weights for WLS regression</a></li>
  <li>
<a href="#sec-lmm" id="toc-sec-lmm" class="nav-link" data-scroll-target="#sec-lmm"><span class="toc-section-number">9</span>  Linear regression models</a>
  <ul class="collapse">
<li><a href="#quantile-regression-scatter-plots" id="toc-quantile-regression-scatter-plots" class="nav-link" data-scroll-target="#quantile-regression-scatter-plots"><span class="toc-section-number">9.1</span>  Quantile regression scatter plots</a></li>
  </ul>
</li>
  <li>
<a href="#quantile-regression" id="toc-quantile-regression" class="nav-link" data-scroll-target="#quantile-regression"><span class="toc-section-number">10</span>  Quantile regression</a>
  <ul class="collapse">
<li><a href="#visualization" id="toc-visualization" class="nav-link" data-scroll-target="#visualization"><span class="toc-section-number">10.1</span>  Visualization</a></li>
  <li><a href="#quantile-regression-scatter-plots-1" id="toc-quantile-regression-scatter-plots-1" class="nav-link" data-scroll-target="#quantile-regression-scatter-plots-1"><span class="toc-section-number">10.2</span>  Quantile regression scatter plots</a></li>
  <li><a href="#quartiles" id="toc-quartiles" class="nav-link" data-scroll-target="#quartiles"><span class="toc-section-number">10.3</span>  Quartiles</a></li>
  <li><a href="#quartile-parameter-plots" id="toc-quartile-parameter-plots" class="nav-link" data-scroll-target="#quartile-parameter-plots"><span class="toc-section-number">10.4</span>  Quartile parameter plots</a></li>
  <li><a href="#quintiles" id="toc-quintiles" class="nav-link" data-scroll-target="#quintiles"><span class="toc-section-number">10.5</span>  Quintiles</a></li>
  <li><a href="#quintile-parameter-plots" id="toc-quintile-parameter-plots" class="nav-link" data-scroll-target="#quintile-parameter-plots"><span class="toc-section-number">10.6</span>  Quintile parameter plots</a></li>
  <li><a href="#plot-predicted" id="toc-plot-predicted" class="nav-link" data-scroll-target="#plot-predicted"><span class="toc-section-number">10.7</span>  Plot predicted</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Using Rasch and WLS to account for measurement uncertainties in regression models</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Magnus Johansson <a href="https://orcid.org/0000-0003-1669-592X" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://www.ri.se/en/what-we-do/projects/center-for-category-based-measurements">
            RISE Research Institutes of Sweden
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 28, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header><section id="introduction" class="level2" data-number="1"><h2 data-number="1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">1</span> Introduction</h2>
<p>There are several reasons for putting this blog post together. The larger issue is to investigate ways to analyze relationships between measures that have varying levels of measurement uncertainty across their respective range or continuum. This is relevant to any kind of latent variable measurement that uses multiple indicators/items/questions as a way to assess a latent variable.</p>
<p>In classical test theory (CTT; i.e.&nbsp;factor analysis) the assumption is generally that the measurement error is a single value, constant across the scale and across participants. Modern test theory (Rasch Measurement Theory (RMT) or Item Response Theory (IRT)) has tools to describe the varying uncertainties of the measure itself, and also allows for estimation of measurement uncertainty for each individual, based on the item properties.</p>
<p>In the “business-as-usual” approach, no matter which types of measurement uncertainty are ignored. The simple case of have two variables and an ordinary least squares (OLS) linear regression model will take the input from each variable as a perfect measurement. Bayesians may have another take on this, and I will look into that at a later point, so for now this is relevant for frequentist statistics.</p>
<p>“Business-as-usual” also makes use of ordinal sum scores disguised as interval scores. There is a seemingly wide-spread idea that estimated person interval scores is not significantly different from ordinal sum scores, and we’ll look further into that as well by including ordinal sum scores.</p>
<p>One way to take measurement uncertainty into account in a linear regression model is to use Weighted Least Squares (WLS) instead of OLS. However, this approach only allows weights for one variable. The weights will be based on the measurement uncertainty for the interval scores.</p>
<p>Additionally, we will use Quantile Regression, with and without weights.</p>
</section><section id="data" class="level2" data-number="2"><h2 data-number="2" class="anchored" data-anchor-id="data">
<span class="header-section-number">2</span> Data</h2>
<p>The data used were collected for a project evaluating multiple work environment questionnaires. Two of the analyzed scales will be used in our example. More information is available at the GitHub <a href="https://github.com/pgmj/PreventOSA">repository</a> and <a href="https://pgmj.github.io/PreventOSA/">website</a>.</p>
<p>The two questionnaires cover the domains of “recovery” and “agency”, where the latter refers to workers’ perceived control over their work situation. Our analyses will look at how “agency” affects “recovery”. We will retain an interval scale score for the “recovery” scale throughout, while varying the “agency” between ordinal sum score, interval score, and interval score with weights.</p>
<p>Variables will be named <code>SEM</code> for standard error of measurement, <code>Score</code> for interval scores, and <code>SumScore</code> for ordinal sum scores.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This analysis is intended to be fully reproducible, which means some data wrangling is done initially. Please jump ahead to <a href="#sec-viz">Section&nbsp;5</a> for data visualizations or <a href="#sec-lmm">Section&nbsp;9</a> for the regression model output.</p>
</div>
</div>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pgmj/RISEkbmRasch">RISEkbmRasch</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://svn.r-project.org/R-packages/trunk/foreign/">foreign</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/easystats/">easystats</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">lmtest</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://www.r-project.org">quantreg</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">### some commands exist in multiple packages, here we define preferred ones that are frequently used</span></span>
<span><span class="va">select</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span></span>
<span><span class="va">count</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span></span>
<span><span class="va">recode</span> <span class="op">&lt;-</span> <span class="fu">car</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span></span>
<span><span class="va">rename</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span></span>
<span></span>
<span><span class="co"># read full dataset, remove ppl w missing data</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreign/man/read.spss.html">read.spss</a></span><span class="op">(</span><span class="st">"data/PreventOSAspss.sav"</span>,</span>
<span>                to.data.frame <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># and item information</span></span>
<span><span class="va">itemlabels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"data/PreventOSAitemlabels.xlsx"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># vector of items</span></span>
<span><span class="va">agencyItems</span> <span class="op">&lt;-</span> <span class="va">itemlabels</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Dimension</span> <span class="op">==</span> <span class="st">"Möjlighet att påverka"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">!</span><span class="va">Dimension</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># data import, with recode of response categories to numerics</span></span>
<span><span class="va">agencyData</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"q0007"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"'Aldrig'=0;</span></span>
<span><span class="st">                                            'Sällan' =1;</span></span>
<span><span class="st">                                            'Ibland'=2;</span></span>
<span><span class="st">                                            'Ganska ofta'=3;</span></span>
<span><span class="st">                                            'Mycket ofta'=4;</span></span>
<span><span class="st">                                            'Alltid'=5"</span>,</span>
<span>    as.factor <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">agencyData</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">agencyItems</span><span class="op">$</span><span class="va">itemnr</span></span>
<span></span>
<span><span class="co"># adjustments based on psychometric analysis</span></span>
<span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp4</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp1</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp1</span>,<span class="st">"1=0;2=1;3=2;4=3;5=4"</span>,as.factor<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp3</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp3</span>,<span class="st">"1=0;2=1;3=2;4=3;5=4"</span>,as.factor<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp2</span>,<span class="st">"1=0;2=1;3=2;4=3;5=4"</span>,as.factor<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp5</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">agencyData</span><span class="op">$</span><span class="va">mp5</span>,<span class="st">"2=1;3=2;4=3;5=4"</span>,as.factor<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># vector of items</span></span>
<span><span class="va">recoveryItems</span> <span class="op">&lt;-</span> <span class="va">itemlabels</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">Dimension</span> <span class="op">==</span> <span class="st">"Återhämtning"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">!</span><span class="va">Dimension</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># data import, with recode of response categories to numerics</span></span>
<span><span class="va">recoveryData</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"q0009"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="fu">car</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/car/man/recode.html">recode</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"'Aldrig'=0;</span></span>
<span><span class="st">                                            'Sällan' =1;</span></span>
<span><span class="st">                                            'Ibland'=2;</span></span>
<span><span class="st">                                            'Ganska ofta'=3;</span></span>
<span><span class="st">                                            'Mycket ofta'=4;</span></span>
<span><span class="st">                                            'Alltid'=5"</span>,</span>
<span>    as.factor <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">recoveryData</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">recoveryItems</span><span class="op">$</span><span class="va">itemnr</span></span>
<span></span>
<span><span class="co"># adjustments based on psychometric analysis</span></span>
<span><span class="va">recoveryData</span><span class="op">$</span><span class="va">å2</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="measurement-properties-for-the-two-scales" class="level2" data-number="3"><h2 data-number="3" class="anchored" data-anchor-id="measurement-properties-for-the-two-scales">
<span class="header-section-number">3</span> Measurement properties for the two scales</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Targeting recovery</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Targeting agency</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Reliability recovery</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Reliability agency</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RItargeting.html">RItargeting</a></span><span class="op">(</span><span class="va">recoveryData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">recoveryRange</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>,<span class="fl">6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RItargeting.html">RItargeting</a></span><span class="op">(</span><span class="va">agencyData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">agencyRange</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>,<span class="fl">6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RItif.html">RItif</a></span><span class="op">(</span><span class="va">recoveryData</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RItif.html">RItif</a></span><span class="op">(</span><span class="va">agencyData</span>, cutoff <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">2.5</span>, </span>
<span>    color <span class="op">=</span> <span class="st">"#e83c63"</span>, linetype <span class="op">=</span> <span class="fl">5</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="estimating-person-scorelocations" class="level2" data-number="4"><h2 data-number="4" class="anchored" data-anchor-id="estimating-person-scorelocations">
<span class="header-section-number">4</span> Estimating person score/locations</h2>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">agencyScore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIestThetas.html">RIestThetas</a></span><span class="op">(</span><span class="va">agencyData</span>, theta_range <span class="op">=</span> <span class="va">agencyRange</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">agencyScore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">agencyScore</span>,<span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">recoveryScore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIestThetas.html">RIestThetas</a></span><span class="op">(</span><span class="va">recoveryData</span>, theta_range <span class="op">=</span> <span class="va">recoveryRange</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">recoveryScore</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">recoveryScore</span>,<span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="plot-relationship-ordinalinterval" class="level3" data-number="4.1"><h3 data-number="4.1" class="anchored" data-anchor-id="plot-relationship-ordinalinterval">
<span class="header-section-number">4.1</span> Plot relationship ordinal/interval</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIscoreSE.html">RIscoreSE</a></span><span class="op">(</span><span class="va">recoveryData</span>, sdx <span class="op">=</span> <span class="fl">15</span>, score_range <span class="op">=</span> <span class="va">recoveryRange</span>, output <span class="op">=</span> <span class="st">"figure"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#RIscoreSE(recoveryData, sdx = 15, score_range = recoveryRange)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIscoreSE.html">RIscoreSE</a></span><span class="op">(</span><span class="va">agencyData</span>, sdx <span class="op">=</span> <span class="fl">10</span>, score_range <span class="op">=</span> <span class="va">agencyRange</span>, output <span class="op">=</span> <span class="st">"figure"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#RIscoreSE(agencyData, sdx = 10, score_range = agencyRange, output = "table")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="estimating-measurement-uncertainties-sem" class="level3" data-number="4.2"><h3 data-number="4.2" class="anchored" data-anchor-id="estimating-measurement-uncertainties-sem">
<span class="header-section-number">4.2</span> Estimating measurement uncertainties (SEM)</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">recoveryTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIscoreSE.html">RIscoreSE</a></span><span class="op">(</span><span class="va">recoveryData</span>, sdx <span class="op">=</span> <span class="fl">15</span>, width <span class="op">=</span> <span class="fl">50</span>, score_range <span class="op">=</span> <span class="va">recoveryRange</span>, output <span class="op">=</span> <span class="st">"dataframe"</span><span class="op">)</span> </span>
<span><span class="va">recoveryTable</span> <span class="op">&lt;-</span> <span class="va">recoveryTable</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span>recoverySEM <span class="op">=</span> <span class="va">`Logit std.error`</span>,</span>
<span>         recoveryScore <span class="op">=</span> <span class="va">`Logit score`</span>,</span>
<span>         recoverySumScore <span class="op">=</span> <span class="va">`Ordinal sum score`</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>recoveryScore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">recoveryScore</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">agencyTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIscoreSE.html">RIscoreSE</a></span><span class="op">(</span><span class="va">agencyData</span>, width <span class="op">=</span> <span class="fl">50</span>, sdx <span class="op">=</span> <span class="fl">10</span>, score_range <span class="op">=</span> <span class="va">agencyRange</span>, output <span class="op">=</span> <span class="st">"dataframe"</span><span class="op">)</span></span>
<span><span class="va">agencyTable</span> <span class="op">&lt;-</span> <span class="va">agencyTable</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">rename</span><span class="op">(</span>agencySEM <span class="op">=</span> <span class="va">`Logit std.error`</span>,</span>
<span>         agencyScore <span class="op">=</span> <span class="va">`Logit score`</span>,</span>
<span>         agencySumScore <span class="op">=</span> <span class="va">`Ordinal sum score`</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>agencyScore <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">agencyScore</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Join SEM values to df based on scores</p>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  agencyScore <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">agencyScore</span>,</span>
<span>  recoveryScore <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">recoveryScore</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">data</span>,<span class="va">recoveryTable</span>, by <span class="op">=</span> <span class="st">"recoveryScore"</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">left_join</span><span class="op">(</span><span class="va">data</span>,<span class="va">agencyTable</span>, by <span class="op">=</span> <span class="st">"agencyScore"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>Rows: 447
Columns: 6
$ agencyScore      &lt;dbl&gt; 2.128, 0.484, 2.128, 3.423, 1.622, 2.732, 0.484, 1.62…
$ recoveryScore    &lt;dbl&gt; -0.592, 0.858, 2.598, 1.919, 1.627, 3.002, 1.919, 1.6…
$ recoverySumScore &lt;dbl&gt; NA, 10, 16, 14, 13, 17, 14, 13, 13, 10, 14, 20, 10, 4…
$ recoverySEM      &lt;dbl&gt; NA, 0.511, 0.623, 0.558, 0.536, 0.675, 0.558, 0.536, …
$ agencySumScore   &lt;dbl&gt; 12, 8, 12, 14, 11, 13, 8, 11, 11, 12, 10, 16, 8, 10, …
$ agencySEM        &lt;dbl&gt; 0.737, 0.582, 0.737, 0.885, 0.680, 0.803, 0.582, 0.68…</code></pre>
</div>
</div>
<p>We have some respondents with unexpected responses and thetas outside what we have generic SEM info about. It is possible to estimate individual SEM but this has not yet been implemented in the RISEkbmRasch package and for this exercise it’ll be sufficient to use those with responses that fully adhere to the expected Rasch model.</p>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="sec-viz" class="level2" data-number="5"><h2 data-number="5" class="anchored" data-anchor-id="sec-viz">
<span class="header-section-number">5</span> Visualizing data</h2>
<section id="histograms" class="level3" data-number="5.1"><h3 data-number="5.1" class="anchored" data-anchor-id="histograms">
<span class="header-section-number">5.1</span> Histograms</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Interval score</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Ordinal sum score</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"agencyScore"</span>,<span class="st">"recoveryScore"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">name</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"agencySumScore"</span>,<span class="st">"recoverySumScore"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">name</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="measurement-uncertainty" class="level3" data-number="5.2"><h3 data-number="5.2" class="anchored" data-anchor-id="measurement-uncertainty">
<span class="header-section-number">5.2</span> Measurement uncertainty</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Agency</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Recovery</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">agencySEM</span>, </span>
<span>             x <span class="op">=</span> <span class="va">agencyScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.54</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu">str_wrap</span><span class="op">(</span><span class="st">"Note. Lower SEM = improved reliability. A SEM at 0.54 (dashed line) corresponds to a reliability coefficient of 0.7 on a 0 to 1 scale. SEM = 0.45 corresponds to reliability 0.8"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">recoverySEM</span>, </span>
<span>             x <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.54</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu">str_wrap</span><span class="op">(</span><span class="st">"Note. Lower SEM = improved reliability. A SEM at 0.54 (dashed line) corresponds to a reliability coefficient of 0.7 on a 0 to 1 scale. SEM = 0.45 corresponds to reliability 0.8"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="scatter-plots" class="level3" data-number="5.3"><h3 data-number="5.3" class="anchored" data-anchor-id="scatter-plots">
<span class="header-section-number">5.3</span> Scatter plots</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Interval score</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Ordinal sum score</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>,</span>
<span>           y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencySumScore</span>,</span>
<span>           y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="relationship-ordinalinterval-score" class="level2" data-number="6"><h2 data-number="6" class="anchored" data-anchor-id="relationship-ordinalinterval-score">
<span class="header-section-number">6</span> Relationship ordinal/interval score</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Correlation</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Correlation standardized</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Ord/int OLS quintiles w sim data</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">cor_test</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, x <span class="op">=</span> <span class="st">"agencySumScore"</span>, y <span class="op">=</span> <span class="st">"agencyScore"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>agencySumScore <span class="op">=</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencySumScore</span><span class="op">)</span>,</span>
<span>         agencyScore <span class="op">=</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencyScore</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">cor_test</span><span class="op">(</span>data <span class="op">=</span> <span class="va">.</span>, x <span class="op">=</span> <span class="st">"agencySumScore"</span>, y <span class="op">=</span> <span class="st">"agencyScore"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIscoreSE.html">RIscoreSE</a></span><span class="op">(</span><span class="va">agencyData</span>, sdx <span class="op">=</span> <span class="fl">10</span>, score_range <span class="op">=</span> <span class="va">agencyRange</span>, output <span class="op">=</span> <span class="st">"dataframe"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">`Logit score`</span>,</span>
<span>             y <span class="op">=</span> <span class="va">`Ordinal sum score`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/RIscoreSE.html">RIscoreSE</a></span><span class="op">(</span><span class="va">agencyData</span>, sdx <span class="op">=</span> <span class="fl">10</span>, score_range <span class="op">=</span> <span class="va">agencyRange</span>, output <span class="op">=</span> <span class="st">"dataframe"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">ordinal_sum_score</span> <span class="op">~</span> <span class="va">logit_score</span>, </span>
<span>     tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>     data <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = ordinal_sum_score ~ logit_score, tau = c(0.2, 0.4, 
    0.6, 0.8), data = .)

tau: [1] 0.2

Coefficients:
            coefficients lower bd upper bd
(Intercept) 5.50305      5.02492  5.86042 
logit_score 2.03114      1.89836  2.34038 

Call: rq(formula = ordinal_sum_score ~ logit_score, tau = c(0.2, 0.4, 
    0.6, 0.8), data = .)

tau: [1] 0.4

Coefficients:
            coefficients lower bd upper bd
(Intercept) 6.11011      5.62335  6.99763 
logit_score 2.30496      1.73799  2.62284 

Call: rq(formula = ordinal_sum_score ~ logit_score, tau = c(0.2, 0.4, 
    0.6, 0.8), data = .)

tau: [1] 0.6

Coefficients:
            coefficients lower bd upper bd
(Intercept) 6.92349      6.16612  7.39662 
logit_score 2.22420      1.91853  2.80089 

Call: rq(formula = ordinal_sum_score ~ logit_score, tau = c(0.2, 0.4, 
    0.6, 0.8), data = .)

tau: [1] 0.8

Coefficients:
            coefficients lower bd upper bd
(Intercept) 7.52022      6.60879  9.56380 
logit_score 2.07340      1.62513  2.62931 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="standardizing-predictor" class="level2" data-number="7"><h2 data-number="7" class="anchored" data-anchor-id="standardizing-predictor">
<span class="header-section-number">7</span> Standardizing predictor</h2>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>agencySumScore <span class="op">=</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencySumScore</span><span class="op">)</span>,</span>
<span>         agencyScore <span class="op">=</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencyScore</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="weights-for-wls-regression" class="level2" data-number="8"><h2 data-number="8" class="anchored" data-anchor-id="weights-for-wls-regression">
<span class="header-section-number">8</span> Weights for WLS regression</h2>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>weights <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">agencySEM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencySEM</span>, </span>
<span>             y <span class="op">=</span> <span class="va">weights</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>weights <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">agencySEM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">weights</span>,<span class="va">agencySEM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">agencySEM</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>     weights agencySEM
1  1.7699115     0.565
2  1.7605634     0.568
3  1.7421603     0.574
4  1.7182131     0.582
5  1.6694491     0.599
6  1.6556291     0.604
7  1.5723270     0.636
8  1.5408320     0.649
9  1.4705882     0.680
10 1.3568521     0.737
11 1.3422819     0.745
12 1.2453300     0.803
13 1.1299435     0.885
14 1.0504202     0.952
15 0.9560229     1.046
16 0.6045949     1.654</code></pre>
</div>
</div>
</section><section id="sec-lmm" class="level2" data-number="9"><h2 data-number="9" class="anchored" data-anchor-id="sec-lmm">
<span class="header-section-number">9</span> Linear regression models</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">OLS interval score</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">WLS interval score</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">OLS ordinal score</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">OLS int score std</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-5" role="tab" aria-controls="tabset-6-5" aria-selected="false">OLS ord score std</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-6" role="tab" aria-controls="tabset-6-6" aria-selected="false">WLS int score std</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-7" role="tab" aria-controls="tabset-6-7" aria-selected="false">Comparison std</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-8" role="tab" aria-controls="tabset-6-8" aria-selected="false">Comparison unstd</a></li>
</ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsInt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencyScore</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsInt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryScore ~ agencyScore, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.3997 -0.8229  0.0283  0.7144  4.1132 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.30254    0.08407   3.599 0.000357 ***
agencyScore  0.57475    0.03545  16.212  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.152 on 433 degrees of freedom
Multiple R-squared:  0.3777,    Adjusted R-squared:  0.3763 
F-statistic: 262.8 on 1 and 433 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/bptest.html">bptest</a></span><span class="op">(</span><span class="va">olsInt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
    studentized Breusch-Pagan test

data:  olsInt
BP = 2.1311, df = 1, p-value = 0.1443</code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/dwtest.html">dwtest</a></span><span class="op">(</span><span class="va">olsInt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
    Durbin-Watson test

data:  olsInt
DW = 1.945, p-value = 0.2824
alternative hypothesis: true autocorrelation is greater than 0</code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">check_model</span><span class="op">(</span><span class="va">olsInt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wlsInt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencyScore</span>, </span>
<span>         data <span class="op">=</span> <span class="va">data</span>,</span>
<span>         weights <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">data</span><span class="op">$</span><span class="va">agencySEM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">wlsInt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryScore ~ agencyScore, data = data, weights = 1/data$agencySEM)

Weighted Residuals:
    Min      1Q  Median      3Q     Max 
-5.8273 -0.8885  0.0199  0.8090  4.9726 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.29223    0.08019   3.644 0.000301 ***
agencyScore  0.58893    0.03985  14.778  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.346 on 433 degrees of freedom
Multiple R-squared:  0.3353,    Adjusted R-squared:  0.3337 
F-statistic: 218.4 on 1 and 433 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">check_model</span><span class="op">(</span><span class="va">wlsInt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsOrd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencySumScore</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsOrd</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryScore ~ agencySumScore, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.2632 -0.7899 -0.0307  0.6911  3.9214 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    -1.77279    0.19929  -8.895   &lt;2e-16 ***
agencySumScore  0.29085    0.01795  16.205   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.152 on 433 degrees of freedom
Multiple R-squared:  0.3775,    Adjusted R-squared:  0.3761 
F-statistic: 262.6 on 1 and 433 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">check_model</span><span class="op">(</span><span class="va">olsOrd</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsIntStd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencyScore</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsIntStd</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryScore ~ standardize(agencyScore), data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.3997 -0.8229  0.0283  0.7144  4.1132 

Coefficients:
                         Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)               1.33032    0.05522   24.09   &lt;2e-16 ***
standardize(agencyScore)  0.89619    0.05528   16.21   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.152 on 433 degrees of freedom
Multiple R-squared:  0.3777,    Adjusted R-squared:  0.3763 
F-statistic: 262.8 on 1 and 433 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
<div id="tabset-6-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-5-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsOrdStd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencySumScore</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsOrdStd</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryScore ~ standardize(agencySumScore), data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.2632 -0.7899 -0.0307  0.6911  3.9214 

Coefficients:
                            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                  1.33032    0.05522   24.09   &lt;2e-16 ***
standardize(agencySumScore)  0.89596    0.05529   16.20   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.152 on 433 degrees of freedom
Multiple R-squared:  0.3775,    Adjusted R-squared:  0.3761 
F-statistic: 262.6 on 1 and 433 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
<div id="tabset-6-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-6-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wlsIntStd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="fu">standardize</span><span class="op">(</span><span class="va">agencyScore</span><span class="op">)</span>, </span>
<span>         data <span class="op">=</span> <span class="va">data</span>,</span>
<span>         weights <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">data</span><span class="op">$</span><span class="va">agencySEM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">wlsIntStd</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryScore ~ standardize(agencyScore), data = data, 
    weights = 1/data$agencySEM)

Weighted Residuals:
    Min      1Q  Median      3Q     Max 
-5.8273 -0.8885  0.0199  0.8090  4.9726 

Coefficients:
                         Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)               1.34536    0.05559   24.20   &lt;2e-16 ***
standardize(agencyScore)  0.91829    0.06214   14.78   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.346 on 433 degrees of freedom
Multiple R-squared:  0.3353,    Adjusted R-squared:  0.3337 
F-statistic: 218.4 on 1 and 433 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
<div id="tabset-6-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-7-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"OLSinterval"</span>,<span class="st">"WLSinterval"</span>,<span class="st">"OLSordinal"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">olsIntStd</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">wlsIntStd</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">olsOrdStd</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">add_column</span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">models</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, .before <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">term</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/kbl_rise.html">kbl_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table style="width:65%; font-size: 14px;  font-family: Arial; margin-left: auto; margin-right: auto;" class="table table-striped table-hover lightable-classic">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> model </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> term </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> estimate </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> std.error </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> statistic </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> p.value </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> conf.low </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> conf.high </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> OLSinterval </td>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:right;"> 1.330 </td>
   <td style="text-align:right;"> 0.055 </td>
   <td style="text-align:right;"> 24.093 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1.222 </td>
   <td style="text-align:right;"> 1.439 </td>
  </tr>
<tr>
<td style="text-align:left;"> WLSinterval </td>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:right;"> 1.345 </td>
   <td style="text-align:right;"> 0.056 </td>
   <td style="text-align:right;"> 24.202 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1.236 </td>
   <td style="text-align:right;"> 1.455 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSordinal </td>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:right;"> 1.330 </td>
   <td style="text-align:right;"> 0.055 </td>
   <td style="text-align:right;"> 24.089 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1.222 </td>
   <td style="text-align:right;"> 1.439 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSinterval </td>
   <td style="text-align:left;"> standardize(agencyScore) </td>
   <td style="text-align:right;"> 0.896 </td>
   <td style="text-align:right;"> 0.055 </td>
   <td style="text-align:right;"> 16.212 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.788 </td>
   <td style="text-align:right;"> 1.005 </td>
  </tr>
<tr>
<td style="text-align:left;"> WLSinterval </td>
   <td style="text-align:left;"> standardize(agencyScore) </td>
   <td style="text-align:right;"> 0.918 </td>
   <td style="text-align:right;"> 0.062 </td>
   <td style="text-align:right;"> 14.778 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.796 </td>
   <td style="text-align:right;"> 1.040 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSordinal </td>
   <td style="text-align:left;"> standardize(agencySumScore) </td>
   <td style="text-align:right;"> 0.896 </td>
   <td style="text-align:right;"> 0.055 </td>
   <td style="text-align:right;"> 16.205 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.787 </td>
   <td style="text-align:right;"> 1.005 </td>
  </tr>
</tbody>
</table>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">olsIntStd</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">wlsIntStd</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">olsOrdStd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">add_column</span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">models</span>, each <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, .before <span class="op">=</span> <span class="st">"r.squared"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/kbl_rise.html">kbl_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table style="width:65%; font-size: 14px;  font-family: Arial; margin-left: auto; margin-right: auto;" class="table table-striped table-hover lightable-classic">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> model </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> r.squared </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> adj.r.squared </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> sigma </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> statistic </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> p.value </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> df </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> logLik </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> AIC </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> BIC </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> deviance </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> df.residual </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> nobs </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> OLSinterval </td>
   <td style="text-align:right;"> 0.378 </td>
   <td style="text-align:right;"> 0.376 </td>
   <td style="text-align:right;"> 1.152 </td>
   <td style="text-align:right;"> 262.822 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -677.649 </td>
   <td style="text-align:right;"> 1361.298 </td>
   <td style="text-align:right;"> 1373.524 </td>
   <td style="text-align:right;"> 574.268 </td>
   <td style="text-align:right;"> 433 </td>
   <td style="text-align:right;"> 435 </td>
  </tr>
<tr>
<td style="text-align:left;"> WLSinterval </td>
   <td style="text-align:right;"> 0.335 </td>
   <td style="text-align:right;"> 0.334 </td>
   <td style="text-align:right;"> 1.346 </td>
   <td style="text-align:right;"> 218.385 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -676.201 </td>
   <td style="text-align:right;"> 1358.403 </td>
   <td style="text-align:right;"> 1370.629 </td>
   <td style="text-align:right;"> 785.009 </td>
   <td style="text-align:right;"> 433 </td>
   <td style="text-align:right;"> 435 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSordinal </td>
   <td style="text-align:right;"> 0.378 </td>
   <td style="text-align:right;"> 0.376 </td>
   <td style="text-align:right;"> 1.152 </td>
   <td style="text-align:right;"> 262.611 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -677.715 </td>
   <td style="text-align:right;"> 1361.430 </td>
   <td style="text-align:right;"> 1373.656 </td>
   <td style="text-align:right;"> 574.443 </td>
   <td style="text-align:right;"> 433 </td>
   <td style="text-align:right;"> 435 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-6-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-8-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span></span>
<span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"OLSinterval"</span>,<span class="st">"WLSinterval"</span>,<span class="st">"OLSordinal"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">olsInt</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">wlsInt</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="va">olsOrd</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">add_column</span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">models</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, .before <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">term</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/kbl_rise.html">kbl_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table style="width:65%; font-size: 14px;  font-family: Arial; margin-left: auto; margin-right: auto;" class="table table-striped table-hover lightable-classic">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> model </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> term </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> estimate </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> std.error </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> statistic </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> p.value </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> conf.low </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> conf.high </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> OLSinterval </td>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:right;"> 0.303 </td>
   <td style="text-align:right;"> 0.084 </td>
   <td style="text-align:right;"> 3.599 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.137 </td>
   <td style="text-align:right;"> 0.468 </td>
  </tr>
<tr>
<td style="text-align:left;"> WLSinterval </td>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:right;"> 0.292 </td>
   <td style="text-align:right;"> 0.080 </td>
   <td style="text-align:right;"> 3.644 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.135 </td>
   <td style="text-align:right;"> 0.450 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSordinal </td>
   <td style="text-align:left;"> (Intercept) </td>
   <td style="text-align:right;"> -1.773 </td>
   <td style="text-align:right;"> 0.199 </td>
   <td style="text-align:right;"> -8.895 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> -2.164 </td>
   <td style="text-align:right;"> -1.381 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSinterval </td>
   <td style="text-align:left;"> agencyScore </td>
   <td style="text-align:right;"> 0.575 </td>
   <td style="text-align:right;"> 0.035 </td>
   <td style="text-align:right;"> 16.212 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.505 </td>
   <td style="text-align:right;"> 0.644 </td>
  </tr>
<tr>
<td style="text-align:left;"> WLSinterval </td>
   <td style="text-align:left;"> agencyScore </td>
   <td style="text-align:right;"> 0.589 </td>
   <td style="text-align:right;"> 0.040 </td>
   <td style="text-align:right;"> 14.778 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.511 </td>
   <td style="text-align:right;"> 0.667 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSordinal </td>
   <td style="text-align:left;"> agencySumScore </td>
   <td style="text-align:right;"> 0.291 </td>
   <td style="text-align:right;"> 0.018 </td>
   <td style="text-align:right;"> 16.205 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.256 </td>
   <td style="text-align:right;"> 0.326 </td>
  </tr>
</tbody>
</table>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">olsInt</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">wlsInt</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://generics.r-lib.org/reference/glance.html">glance</a></span><span class="op">(</span><span class="va">olsOrd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">add_column</span><span class="op">(</span>model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">models</span>, each <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, .before <span class="op">=</span> <span class="st">"r.squared"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/kbl_rise.html">kbl_rise</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table style="width:65%; font-size: 14px;  font-family: Arial; margin-left: auto; margin-right: auto;" class="table table-striped table-hover lightable-classic">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> model </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> r.squared </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> adj.r.squared </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> sigma </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> statistic </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> p.value </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> df </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> logLik </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> AIC </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> BIC </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> deviance </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> df.residual </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;"> nobs </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> OLSinterval </td>
   <td style="text-align:right;"> 0.378 </td>
   <td style="text-align:right;"> 0.376 </td>
   <td style="text-align:right;"> 1.152 </td>
   <td style="text-align:right;"> 262.822 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -677.649 </td>
   <td style="text-align:right;"> 1361.298 </td>
   <td style="text-align:right;"> 1373.524 </td>
   <td style="text-align:right;"> 574.268 </td>
   <td style="text-align:right;"> 433 </td>
   <td style="text-align:right;"> 435 </td>
  </tr>
<tr>
<td style="text-align:left;"> WLSinterval </td>
   <td style="text-align:right;"> 0.335 </td>
   <td style="text-align:right;"> 0.334 </td>
   <td style="text-align:right;"> 1.346 </td>
   <td style="text-align:right;"> 218.385 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -676.201 </td>
   <td style="text-align:right;"> 1358.403 </td>
   <td style="text-align:right;"> 1370.629 </td>
   <td style="text-align:right;"> 785.009 </td>
   <td style="text-align:right;"> 433 </td>
   <td style="text-align:right;"> 435 </td>
  </tr>
<tr>
<td style="text-align:left;"> OLSordinal </td>
   <td style="text-align:right;"> 0.378 </td>
   <td style="text-align:right;"> 0.376 </td>
   <td style="text-align:right;"> 1.152 </td>
   <td style="text-align:right;"> 262.611 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -677.715 </td>
   <td style="text-align:right;"> 1361.430 </td>
   <td style="text-align:right;"> 1373.656 </td>
   <td style="text-align:right;"> 574.443 </td>
   <td style="text-align:right;"> 433 </td>
   <td style="text-align:right;"> 435 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<section id="quantile-regression-scatter-plots" class="level3" data-number="9.1"><h3 data-number="9.1" class="anchored" data-anchor-id="quantile-regression-scatter-plots">
<span class="header-section-number">9.1</span> Quantile regression scatter plots</h3>
<p>I haven’t figured out how to make ggplot use weighted model, so these are only unweighted.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Interval OLS quartiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Ordinal OLS quartiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Interval OLS quintiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Ordinal OLS quintiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-5" role="tab" aria-controls="tabset-7-5" aria-selected="false">Ordinal/interval OLS quintiles</a></li>
</ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencySumScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencySumScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-7-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-5-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pointSize</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/matrixStats/man/rowCounts.html">count</a></span><span class="op">(</span><span class="va">agencyScore</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>,<span class="va">pointSize</span>, by <span class="op">=</span> <span class="st">"agencyScore"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>, y <span class="op">=</span> <span class="va">agencySumScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>                <span class="co">#color = c("blue","red","orange","pink")) # add coloring to lines</span></span>
<span>                <span class="co">#linetype = c("dotted", "dashed", "solid", "dashed"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section><section id="quantile-regression" class="level2" data-number="10"><h2 data-number="10" class="anchored" data-anchor-id="quantile-regression">
<span class="header-section-number">10</span> Quantile regression</h2>
<p>We can use any set of quantiles using the <code>tau</code> option. Here, we choose 0.25, 0.5, and 0.75. Tau = 0.5 is the same as “median regression”.</p>
<section id="visualization" class="level3" data-number="10.1"><h3 data-number="10.1" class="anchored" data-anchor-id="visualization">
<span class="header-section-number">10.1</span> Visualization</h3>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dviz</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">add_column</span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"agencyScore"</span>,<span class="st">"recoveryScore"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>qgroup <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span><span class="va">value</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, probs <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span> <span class="op">~</span> <span class="st">"lower"</span>,</span>
<span>                            <span class="va">value</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, probs <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">value</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, probs <span class="op">=</span> <span class="fl">.75</span><span class="op">)</span> <span class="op">~</span> <span class="st">"middle"</span>,</span>
<span>                            <span class="va">value</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, probs <span class="op">=</span> <span class="fl">.75</span><span class="op">)</span> <span class="op">~</span> <span class="st">"upper"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>id_cols <span class="op">=</span> <span class="st">"id"</span>, </span>
<span>              names_from <span class="op">=</span> <span class="st">"name"</span>, </span>
<span>              values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"value"</span>,<span class="st">"qgroup"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dviz</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">value_agencyScore</span>,</span>
<span>    y <span class="op">=</span> <span class="va">value_recoveryScore</span>,</span>
<span>    color <span class="op">=</span> <span class="va">qgroup_recoveryScore</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/RISEkbmRasch/man/theme_rise.html">theme_rise</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_color_brewer</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"qual"</span>, palette <span class="op">=</span> <span class="st">"Dark2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Agency Score"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Recovery Score"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</section><section id="quantile-regression-scatter-plots-1" class="level3" data-number="10.2"><h3 data-number="10.2" class="anchored" data-anchor-id="quantile-regression-scatter-plots-1">
<span class="header-section-number">10.2</span> Quantile regression scatter plots</h3>
<p>I haven’t figured out how to make ggplot use weighted model (WLS), so these are only unweighted.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Interval OLS quartiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Ordinal OLS quartiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false">Interval OLS quintiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false">Ordinal OLS quintiles</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-5" role="tab" aria-controls="tabset-8-5" aria-selected="false">Ordinal/interval OLS quintiles</a></li>
</ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencySumScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencySumScore</span>, y <span class="op">=</span> <span class="va">recoveryScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-8-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-5-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">pointSize</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/matrixStats/man/rowCounts.html">count</a></span><span class="op">(</span><span class="va">agencyScore</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>,<span class="va">pointSize</span>, by <span class="op">=</span> <span class="st">"agencyScore"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">agencyScore</span>, y <span class="op">=</span> <span class="va">agencySumScore</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile</a></span><span class="op">(</span>quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>                method <span class="op">=</span> <span class="st">"rq"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="1050"></p>
</div>
<details open=""><summary>Code</summary><div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>                <span class="co">#color = c("blue","red","orange","pink")) # add coloring to lines</span></span>
<span>                <span class="co">#linetype = c("dotted", "dashed", "solid", "dashed"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section><section id="quartiles" class="level3" data-number="10.3"><h3 data-number="10.3" class="anchored" data-anchor-id="quartiles">
<span class="header-section-number">10.3</span> Quartiles</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Interval</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Interval weighted</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false">Ordinal</a></li>
</ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsIntQ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencyScore</span>, </span>
<span>              tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsIntQ</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.25, 0.5, 
    0.75), data = data2)

tau: [1] 0.25

Coefficients:
            coefficients lower bd upper bd
(Intercept) 0.54852      0.40162  0.69930 
agencyScore 0.77303      0.61108  0.85989 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.25, 0.5, 
    0.75), data = data2)

tau: [1] 0.5

Coefficients:
            coefficients lower bd upper bd
(Intercept) 1.39128      1.13848  1.48046 
agencyScore 0.76494      0.55469  0.95523 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.25, 0.5, 
    0.75), data = data2)

tau: [1] 0.75

Coefficients:
            coefficients lower bd upper bd
(Intercept) 2.02444      1.99369  2.34137 
agencyScore 0.98917      0.47491  1.26604 </code></pre>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wlsIntQ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencyScore</span>, </span>
<span>              tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data2</span>,</span>
<span>              weights <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">data</span><span class="op">$</span><span class="va">agencySEM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">wlsIntQ</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.25, 0.5, 
    0.75), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.25

Coefficients:
            coefficients lower bd upper bd
(Intercept) 0.60364      0.27785  0.78794 
agencyScore 0.81241      0.65763  0.96267 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.25, 0.5, 
    0.75), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.5

Coefficients:
            coefficients lower bd upper bd
(Intercept) 1.40682      1.02961  1.46561 
agencyScore 0.79468      0.59389  1.04917 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.25, 0.5, 
    0.75), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.75

Coefficients:
            coefficients lower bd upper bd
(Intercept) 2.03860      1.97684  2.30859 
agencyScore 0.92420      0.63342  1.19706 </code></pre>
</div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsOrdQ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencySumScore</span>, </span>
<span>              tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsOrdQ</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.25, 0.5, 
    0.75), data = data2)

tau: [1] 0.25

Coefficients:
               coefficients lower bd upper bd
(Intercept)    0.51085      0.31790  0.88835 
agencySumScore 0.81368      0.61073  1.03613 

Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.25, 0.5, 
    0.75), data = data2)

tau: [1] 0.5

Coefficients:
               coefficients lower bd upper bd
(Intercept)    1.27624      1.03008  1.37530 
agencySumScore 0.77012      0.56493  0.87982 

Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.25, 0.5, 
    0.75), data = data2)

tau: [1] 0.75

Coefficients:
               coefficients lower bd upper bd
(Intercept)    2.06409      1.80116  2.17954 
agencySumScore 0.81874      0.68975  0.99604 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="quartile-parameter-plots" class="level3" data-number="10.4"><h3 data-number="10.4" class="anchored" data-anchor-id="quartile-parameter-plots">
<span class="header-section-number">10.4</span> Quartile parameter plots</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true">Interval OLS</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false">Interval WLS</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false">Ordinal OLS</a></li>
</ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">parameters</span><span class="op">(</span><span class="va">olsIntQ</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.75</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"OLS quantile regression with interval predictor"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">parameters</span><span class="op">(</span><span class="va">wlsIntQ</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.75</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"WLS quantile regression with interval predictor"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">parameters</span><span class="op">(</span><span class="va">olsOrdQ</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.75</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"OLS quantile regression with ordinal sum score predictor"</span>,</span>
<span>        caption <span class="op">=</span> <span class="st">"Note. Dashed line indicates 0.25."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="quintiles" class="level3" data-number="10.5"><h3 data-number="10.5" class="anchored" data-anchor-id="quintiles">
<span class="header-section-number">10.5</span> Quintiles</h3>
<p>We need to generate simulated data since variation is low in this dataset.</p>
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># get item parameters for both</span></span>
<span><span class="co"># generate correlated vectors of thetas, one for each variable</span></span>
<span><span class="co"># https://cran.r-project.org/web/packages/faux/vignettes/rnorm_multi.html</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true">Interval</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false">Interval weighted</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false">Ordinal</a></li>
</ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsIntQ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencyScore</span>, </span>
<span>              tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsIntQ</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2)

tau: [1] 0.2

Coefficients:
            coefficients lower bd upper bd
(Intercept)  0.36075     -0.03012  0.44698
agencyScore  0.76552      0.72249  1.00876

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2)

tau: [1] 0.4

Coefficients:
            coefficients lower bd upper bd
(Intercept) 0.94939      0.68695  1.18510 
agencyScore 0.71408      0.57422  0.91513 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2)

tau: [1] 0.6

Coefficients:
            coefficients lower bd upper bd
(Intercept) 1.66261      1.42847  1.81062 
agencyScore 0.89217      0.46320  1.01949 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2)

tau: [1] 0.8

Coefficients:
            coefficients lower bd upper bd
(Intercept) 2.32222      1.91357  2.37183 
agencyScore 1.12309      0.81523  1.39159 </code></pre>
</div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wlsIntQ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencyScore</span>, </span>
<span>              tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data2</span>,</span>
<span>              weights <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="va">data</span><span class="op">$</span><span class="va">agencySEM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">wlsIntQ</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.2

Coefficients:
            coefficients lower bd upper bd
(Intercept) 0.40871      0.19600  0.48283 
agencyScore 0.89181      0.71959  0.98957 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.4

Coefficients:
            coefficients lower bd upper bd
(Intercept) 1.02134      0.89817  1.24002 
agencyScore 0.77251      0.62179  0.91729 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.6

Coefficients:
            coefficients lower bd upper bd
(Intercept) 1.69172      1.39643  1.83068 
agencyScore 0.90582      0.66346  1.10394 

Call: rq(formula = recoveryScore ~ agencyScore, tau = c(0.2, 0.4, 0.6, 
    0.8), data = data2, weights = 1/data$agencySEM)

tau: [1] 0.8

Coefficients:
            coefficients lower bd upper bd
(Intercept) 2.32222      1.92972  2.38242 
agencyScore 1.12309      0.78752  1.21183 </code></pre>
</div>
</div>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">olsOrdQ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/quantreg/man/rq.html">rq</a></span><span class="op">(</span><span class="va">recoveryScore</span> <span class="op">~</span> <span class="va">agencySumScore</span>, </span>
<span>              tau <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span><span class="op">)</span>,</span>
<span>              data <span class="op">=</span> <span class="va">data2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">olsOrdQ</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.2, 0.4, 
    0.6, 0.8), data = data2)

tau: [1] 0.2

Coefficients:
               coefficients lower bd upper bd
(Intercept)    0.36282      0.19479  0.51771 
agencySumScore 0.89915      0.64148  1.02005 

Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.2, 0.4, 
    0.6, 0.8), data = data2)

tau: [1] 0.4

Coefficients:
               coefficients lower bd upper bd
(Intercept)    1.03165      0.67163  1.22585 
agencySumScore 0.78675      0.65692  0.92257 

Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.2, 0.4, 
    0.6, 0.8), data = data2)

tau: [1] 0.6

Coefficients:
               coefficients lower bd upper bd
(Intercept)    1.56594      1.51345  1.68881 
agencySumScore 0.81709      0.54335  0.94448 

Call: rq(formula = recoveryScore ~ agencySumScore, tau = c(0.2, 0.4, 
    0.6, 0.8), data = data2)

tau: [1] 0.8

Coefficients:
               coefficients lower bd upper bd
(Intercept)    2.20055      2.08845  2.44756 
agencySumScore 0.91983      0.73242  1.05846 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="quintile-parameter-plots" class="level3" data-number="10.6"><h3 data-number="10.6" class="anchored" data-anchor-id="quintile-parameter-plots">
<span class="header-section-number">10.6</span> Quintile parameter plots</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true">Interval OLS</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false">Interval WLS</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false">Ordinal OLS</a></li>
</ul>
<div class="tab-content">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">parameters</span><span class="op">(</span><span class="va">olsIntQ</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.75</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"OLS quantile regression with interval predictor"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb87"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">parameters</span><span class="op">(</span><span class="va">wlsIntQ</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.75</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"WLS quantile regression with interval predictor"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
<div id="tabset-12-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<details open=""><summary>Code</summary><div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">parameters</span><span class="op">(</span><span class="va">olsOrdQ</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">0.75</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"OLS quantile regression with ordinal sum score predictor"</span>,</span>
<span>        caption <span class="op">=</span> <span class="st">"Note. Dashed line indicates 0.25."</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="WLSregr_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="1050"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="plot-predicted" class="level3" data-number="10.7"><h3 data-number="10.7" class="anchored" data-anchor-id="plot-predicted">
<span class="header-section-number">10.7</span> Plot predicted</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true"></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false"></a></li>
</ul>
<div class="tab-content">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<div class="cell">

</div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell">

</div>
</div>
</div>
</div>


<!-- -->

</section></section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{johansson2023,
  author = {Magnus Johansson},
  title = {Using {Rasch} and {WLS} to Account for Measurement
    Uncertainties in Regression Models},
  date = {2023-09-28},
  url = {https://pgmj.github.io/WLSregr.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-johansson2023" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Magnus Johansson. (2023, September 28). <em>Using Rasch and WLS to
account for measurement uncertainties in regression models</em>. <a href="https://pgmj.github.io/WLSregr.html">https://pgmj.github.io/WLSregr.html</a>
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb89" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Using Rasch and WLS to account for measurement uncertainties in regression models"</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> </span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co">  name: Magnus Johansson</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="co">  affiliation: RISE Research Institutes of Sweden</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="co">  affiliation-url: https://www.ri.se/en/what-we-do/projects/center-for-category-based-measurements</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="co">  orcid: 0000-0003-1669-592X</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> last-modified</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="co">  type: 'webpage'</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="an">csl:</span><span class="co"> apa.csl</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a><span class="co">  cache: false</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> </span></span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a><span class="co">  markdown: </span></span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a><span class="co">    wrap: 72</span></span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a>There are several reasons for putting this blog post together. The larger issue is to investigate ways to analyze relationships between measures that have varying levels of measurement uncertainty across their respective range or continuum. This is  relevant to any kind of latent variable measurement that uses multiple indicators/items/questions as a way to assess a latent variable. </span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>In classical test theory (CTT; i.e. factor analysis) the assumption is generally that the measurement error is a single value, constant across the scale and across participants. Modern test theory (Rasch Measurement Theory (RMT) or Item Response Theory (IRT)) has tools to describe the varying uncertainties of the measure itself, and also allows for estimation of measurement uncertainty for each individual, based on the item properties.</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>In the "business-as-usual" approach, no matter which  types of measurement uncertainty are ignored. The simple case of have two variables and an ordinary least squares (OLS) linear regression model will take the input from each variable as a perfect measurement. Bayesians may have another take on this, and I will look into that at a later point, so for now this is relevant for frequentist statistics. </span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-31"><a href="#cb89-31" aria-hidden="true" tabindex="-1"></a>"Business-as-usual" also makes use of ordinal sum scores disguised as interval scores. There is a seemingly wide-spread idea that estimated person interval scores is not significantly different from ordinal sum scores, and we'll look further into that as well by including ordinal sum scores.</span>
<span id="cb89-32"><a href="#cb89-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-33"><a href="#cb89-33" aria-hidden="true" tabindex="-1"></a>One way to take measurement uncertainty into account in a linear regression model is to use Weighted Least Squares (WLS) instead of OLS. However, this approach only allows weights for one variable. The weights will be based on the measurement uncertainty for the interval scores.</span>
<span id="cb89-34"><a href="#cb89-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-35"><a href="#cb89-35" aria-hidden="true" tabindex="-1"></a>Additionally, we will use Quantile Regression, with and without weights.</span>
<span id="cb89-36"><a href="#cb89-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-37"><a href="#cb89-37" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data</span></span>
<span id="cb89-38"><a href="#cb89-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-39"><a href="#cb89-39" aria-hidden="true" tabindex="-1"></a>The data used were collected for a project evaluating multiple work environment questionnaires. Two of the analyzed scales will be used in our example. More information is available at the GitHub <span class="co">[</span><span class="ot">repository</span><span class="co">](https://github.com/pgmj/PreventOSA)</span> and <span class="co">[</span><span class="ot">website</span><span class="co">](https://pgmj.github.io/PreventOSA/)</span>.</span>
<span id="cb89-40"><a href="#cb89-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-41"><a href="#cb89-41" aria-hidden="true" tabindex="-1"></a>The two questionnaires cover the domains of "recovery" and "agency", where the latter refers to workers' perceived control over their work situation. Our analyses will look at how "agency" affects "recovery". We will retain an interval scale score for the "recovery" scale throughout, while varying the "agency" between ordinal sum score, interval score, and interval score with weights.</span>
<span id="cb89-42"><a href="#cb89-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-43"><a href="#cb89-43" aria-hidden="true" tabindex="-1"></a>Variables will be named <span class="in">`SEM`</span> for standard error of measurement, <span class="in">`Score`</span> for interval scores, and <span class="in">`SumScore`</span> for ordinal sum scores.</span>
<span id="cb89-44"><a href="#cb89-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-45"><a href="#cb89-45" aria-hidden="true" tabindex="-1"></a>::: {.callout-note}</span>
<span id="cb89-46"><a href="#cb89-46" aria-hidden="true" tabindex="-1"></a>This analysis is intended to be fully reproducible, which means some data wrangling is done initially. Please jump ahead to @sec-viz for data visualizations or @sec-lmm for the regression model output.</span>
<span id="cb89-47"><a href="#cb89-47" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-48"><a href="#cb89-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-51"><a href="#cb89-51" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-52"><a href="#cb89-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RISEkbmRasch)</span>
<span id="cb89-53"><a href="#cb89-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb89-54"><a href="#cb89-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb89-55"><a href="#cb89-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(easystats)</span>
<span id="cb89-56"><a href="#cb89-56" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmtest)</span>
<span id="cb89-57"><a href="#cb89-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantreg)</span>
<span id="cb89-58"><a href="#cb89-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-59"><a href="#cb89-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-62"><a href="#cb89-62" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-63"><a href="#cb89-63" aria-hidden="true" tabindex="-1"></a><span class="do">### some commands exist in multiple packages, here we define preferred ones that are frequently used</span></span>
<span id="cb89-64"><a href="#cb89-64" aria-hidden="true" tabindex="-1"></a>select <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>select</span>
<span id="cb89-65"><a href="#cb89-65" aria-hidden="true" tabindex="-1"></a>count <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>count</span>
<span id="cb89-66"><a href="#cb89-66" aria-hidden="true" tabindex="-1"></a>recode <span class="ot">&lt;-</span> car<span class="sc">::</span>recode</span>
<span id="cb89-67"><a href="#cb89-67" aria-hidden="true" tabindex="-1"></a>rename <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>rename</span>
<span id="cb89-68"><a href="#cb89-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-69"><a href="#cb89-69" aria-hidden="true" tabindex="-1"></a><span class="co"># read full dataset, remove ppl w missing data</span></span>
<span id="cb89-70"><a href="#cb89-70" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.spss</span>(<span class="st">"data/PreventOSAspss.sav"</span>,</span>
<span id="cb89-71"><a href="#cb89-71" aria-hidden="true" tabindex="-1"></a>                <span class="at">to.data.frame =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-72"><a href="#cb89-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb89-73"><a href="#cb89-73" aria-hidden="true" tabindex="-1"></a><span class="co"># and item information</span></span>
<span id="cb89-74"><a href="#cb89-74" aria-hidden="true" tabindex="-1"></a>itemlabels <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/PreventOSAitemlabels.xlsx"</span>)</span>
<span id="cb89-75"><a href="#cb89-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-76"><a href="#cb89-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-79"><a href="#cb89-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-80"><a href="#cb89-80" aria-hidden="true" tabindex="-1"></a><span class="co"># vector of items</span></span>
<span id="cb89-81"><a href="#cb89-81" aria-hidden="true" tabindex="-1"></a>agencyItems <span class="ot">&lt;-</span> itemlabels <span class="sc">%&gt;%</span></span>
<span id="cb89-82"><a href="#cb89-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Dimension <span class="sc">==</span> <span class="st">"Möjlighet att påverka"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-83"><a href="#cb89-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Dimension)</span>
<span id="cb89-84"><a href="#cb89-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-85"><a href="#cb89-85" aria-hidden="true" tabindex="-1"></a><span class="co"># data import, with recode of response categories to numerics</span></span>
<span id="cb89-86"><a href="#cb89-86" aria-hidden="true" tabindex="-1"></a>agencyData <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb89-87"><a href="#cb89-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"q0007"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-88"><a href="#cb89-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> car<span class="sc">::</span><span class="fu">recode</span>(.x, <span class="st">"'Aldrig'=0;</span></span>
<span id="cb89-89"><a href="#cb89-89" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Sällan' =1;</span></span>
<span id="cb89-90"><a href="#cb89-90" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Ibland'=2;</span></span>
<span id="cb89-91"><a href="#cb89-91" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Ganska ofta'=3;</span></span>
<span id="cb89-92"><a href="#cb89-92" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Mycket ofta'=4;</span></span>
<span id="cb89-93"><a href="#cb89-93" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Alltid'=5"</span>,</span>
<span id="cb89-94"><a href="#cb89-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">as.factor =</span> <span class="cn">FALSE</span></span>
<span id="cb89-95"><a href="#cb89-95" aria-hidden="true" tabindex="-1"></a>  )))</span>
<span id="cb89-96"><a href="#cb89-96" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(agencyData) <span class="ot">&lt;-</span> agencyItems<span class="sc">$</span>itemnr</span>
<span id="cb89-97"><a href="#cb89-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-98"><a href="#cb89-98" aria-hidden="true" tabindex="-1"></a><span class="co"># adjustments based on psychometric analysis</span></span>
<span id="cb89-99"><a href="#cb89-99" aria-hidden="true" tabindex="-1"></a>agencyData<span class="sc">$</span>mp4 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb89-100"><a href="#cb89-100" aria-hidden="true" tabindex="-1"></a>agencyData<span class="sc">$</span>mp1<span class="ot">&lt;-</span><span class="fu">recode</span>(agencyData<span class="sc">$</span>mp1,<span class="st">"1=0;2=1;3=2;4=3;5=4"</span>,<span class="at">as.factor=</span><span class="cn">FALSE</span>)</span>
<span id="cb89-101"><a href="#cb89-101" aria-hidden="true" tabindex="-1"></a>agencyData<span class="sc">$</span>mp3<span class="ot">&lt;-</span><span class="fu">recode</span>(agencyData<span class="sc">$</span>mp3,<span class="st">"1=0;2=1;3=2;4=3;5=4"</span>,<span class="at">as.factor=</span><span class="cn">FALSE</span>)</span>
<span id="cb89-102"><a href="#cb89-102" aria-hidden="true" tabindex="-1"></a>agencyData<span class="sc">$</span>mp2<span class="ot">&lt;-</span><span class="fu">recode</span>(agencyData<span class="sc">$</span>mp2,<span class="st">"1=0;2=1;3=2;4=3;5=4"</span>,<span class="at">as.factor=</span><span class="cn">FALSE</span>)</span>
<span id="cb89-103"><a href="#cb89-103" aria-hidden="true" tabindex="-1"></a>agencyData<span class="sc">$</span>mp5<span class="ot">&lt;-</span><span class="fu">recode</span>(agencyData<span class="sc">$</span>mp5,<span class="st">"2=1;3=2;4=3;5=4"</span>,<span class="at">as.factor=</span><span class="cn">FALSE</span>)</span>
<span id="cb89-104"><a href="#cb89-104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-105"><a href="#cb89-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-108"><a href="#cb89-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-109"><a href="#cb89-109" aria-hidden="true" tabindex="-1"></a><span class="co"># vector of items</span></span>
<span id="cb89-110"><a href="#cb89-110" aria-hidden="true" tabindex="-1"></a>recoveryItems <span class="ot">&lt;-</span> itemlabels <span class="sc">%&gt;%</span></span>
<span id="cb89-111"><a href="#cb89-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Dimension <span class="sc">==</span> <span class="st">"Återhämtning"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-112"><a href="#cb89-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Dimension)</span>
<span id="cb89-113"><a href="#cb89-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-114"><a href="#cb89-114" aria-hidden="true" tabindex="-1"></a><span class="co"># data import, with recode of response categories to numerics</span></span>
<span id="cb89-115"><a href="#cb89-115" aria-hidden="true" tabindex="-1"></a>recoveryData <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb89-116"><a href="#cb89-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"q0009"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-117"><a href="#cb89-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> car<span class="sc">::</span><span class="fu">recode</span>(.x, <span class="st">"'Aldrig'=0;</span></span>
<span id="cb89-118"><a href="#cb89-118" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Sällan' =1;</span></span>
<span id="cb89-119"><a href="#cb89-119" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Ibland'=2;</span></span>
<span id="cb89-120"><a href="#cb89-120" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Ganska ofta'=3;</span></span>
<span id="cb89-121"><a href="#cb89-121" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Mycket ofta'=4;</span></span>
<span id="cb89-122"><a href="#cb89-122" aria-hidden="true" tabindex="-1"></a><span class="st">                                            'Alltid'=5"</span>,</span>
<span id="cb89-123"><a href="#cb89-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">as.factor =</span> <span class="cn">FALSE</span></span>
<span id="cb89-124"><a href="#cb89-124" aria-hidden="true" tabindex="-1"></a>  )))</span>
<span id="cb89-125"><a href="#cb89-125" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recoveryData) <span class="ot">&lt;-</span> recoveryItems<span class="sc">$</span>itemnr</span>
<span id="cb89-126"><a href="#cb89-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-127"><a href="#cb89-127" aria-hidden="true" tabindex="-1"></a><span class="co"># adjustments based on psychometric analysis</span></span>
<span id="cb89-128"><a href="#cb89-128" aria-hidden="true" tabindex="-1"></a>recoveryData<span class="sc">$</span>å2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb89-129"><a href="#cb89-129" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-130"><a href="#cb89-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-131"><a href="#cb89-131" aria-hidden="true" tabindex="-1"></a><span class="fu">## Measurement properties for the two scales</span></span>
<span id="cb89-132"><a href="#cb89-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-133"><a href="#cb89-133" aria-hidden="true" tabindex="-1"></a>::: {.panel-tabset} </span>
<span id="cb89-134"><a href="#cb89-134" aria-hidden="true" tabindex="-1"></a><span class="fu">### Targeting recovery</span></span>
<span id="cb89-137"><a href="#cb89-137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-138"><a href="#cb89-138" aria-hidden="true" tabindex="-1"></a><span class="fu">RItargeting</span>(recoveryData)</span>
<span id="cb89-139"><a href="#cb89-139" aria-hidden="true" tabindex="-1"></a>recoveryRange <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>,<span class="dv">6</span>)</span>
<span id="cb89-140"><a href="#cb89-140" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-141"><a href="#cb89-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-142"><a href="#cb89-142" aria-hidden="true" tabindex="-1"></a><span class="fu">### Targeting agency</span></span>
<span id="cb89-145"><a href="#cb89-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-146"><a href="#cb89-146" aria-hidden="true" tabindex="-1"></a><span class="fu">RItargeting</span>(agencyData)</span>
<span id="cb89-147"><a href="#cb89-147" aria-hidden="true" tabindex="-1"></a>agencyRange <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>,<span class="dv">6</span>)</span>
<span id="cb89-148"><a href="#cb89-148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-149"><a href="#cb89-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-150"><a href="#cb89-150" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reliability recovery</span></span>
<span id="cb89-153"><a href="#cb89-153" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-154"><a href="#cb89-154" aria-hidden="true" tabindex="-1"></a><span class="fu">RItif</span>(recoveryData)</span>
<span id="cb89-155"><a href="#cb89-155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-156"><a href="#cb89-156" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reliability agency</span></span>
<span id="cb89-159"><a href="#cb89-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-160"><a href="#cb89-160" aria-hidden="true" tabindex="-1"></a><span class="fu">RItif</span>(agencyData, <span class="at">cutoff =</span> <span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb89-161"><a href="#cb89-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">2.5</span>, </span>
<span id="cb89-162"><a href="#cb89-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#e83c63"</span>, <span class="at">linetype =</span> <span class="dv">5</span>, <span class="at">linewidth =</span> <span class="fl">0.5</span>)</span>
<span id="cb89-163"><a href="#cb89-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-164"><a href="#cb89-164" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-165"><a href="#cb89-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-166"><a href="#cb89-166" aria-hidden="true" tabindex="-1"></a><span class="fu">## Estimating person score/locations</span></span>
<span id="cb89-167"><a href="#cb89-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-170"><a href="#cb89-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-171"><a href="#cb89-171" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>agencyScore <span class="ot">&lt;-</span> <span class="fu">RIestThetas</span>(agencyData, <span class="at">theta_range =</span> agencyRange)</span>
<span id="cb89-172"><a href="#cb89-172" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>agencyScore <span class="ot">&lt;-</span> <span class="fu">round</span>(df<span class="sc">$</span>agencyScore,<span class="dv">3</span>)</span>
<span id="cb89-173"><a href="#cb89-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-174"><a href="#cb89-174" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>recoveryScore <span class="ot">&lt;-</span> <span class="fu">RIestThetas</span>(recoveryData, <span class="at">theta_range =</span> recoveryRange)</span>
<span id="cb89-175"><a href="#cb89-175" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>recoveryScore <span class="ot">&lt;-</span> <span class="fu">round</span>(df<span class="sc">$</span>recoveryScore,<span class="dv">3</span>)</span>
<span id="cb89-176"><a href="#cb89-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-177"><a href="#cb89-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-178"><a href="#cb89-178" aria-hidden="true" tabindex="-1"></a><span class="fu">### Plot relationship ordinal/interval</span></span>
<span id="cb89-179"><a href="#cb89-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-182"><a href="#cb89-182" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-183"><a href="#cb89-183" aria-hidden="true" tabindex="-1"></a><span class="fu">RIscoreSE</span>(recoveryData, <span class="at">sdx =</span> <span class="dv">15</span>, <span class="at">score_range =</span> recoveryRange, <span class="at">output =</span> <span class="st">"figure"</span>)</span>
<span id="cb89-184"><a href="#cb89-184" aria-hidden="true" tabindex="-1"></a><span class="co">#RIscoreSE(recoveryData, sdx = 15, score_range = recoveryRange)</span></span>
<span id="cb89-185"><a href="#cb89-185" aria-hidden="true" tabindex="-1"></a><span class="fu">RIscoreSE</span>(agencyData, <span class="at">sdx =</span> <span class="dv">10</span>, <span class="at">score_range =</span> agencyRange, <span class="at">output =</span> <span class="st">"figure"</span>)</span>
<span id="cb89-186"><a href="#cb89-186" aria-hidden="true" tabindex="-1"></a><span class="co">#RIscoreSE(agencyData, sdx = 10, score_range = agencyRange, output = "table")</span></span>
<span id="cb89-187"><a href="#cb89-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-188"><a href="#cb89-188" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-189"><a href="#cb89-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-190"><a href="#cb89-190" aria-hidden="true" tabindex="-1"></a><span class="fu">### Estimating measurement uncertainties (SEM)</span></span>
<span id="cb89-193"><a href="#cb89-193" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-194"><a href="#cb89-194" aria-hidden="true" tabindex="-1"></a>recoveryTable <span class="ot">&lt;-</span> <span class="fu">RIscoreSE</span>(recoveryData, <span class="at">sdx =</span> <span class="dv">15</span>, <span class="at">width =</span> <span class="dv">50</span>, <span class="at">score_range =</span> recoveryRange, <span class="at">output =</span> <span class="st">"dataframe"</span>) </span>
<span id="cb89-195"><a href="#cb89-195" aria-hidden="true" tabindex="-1"></a>recoveryTable <span class="ot">&lt;-</span> recoveryTable <span class="sc">%&gt;%</span> </span>
<span id="cb89-196"><a href="#cb89-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">recoverySEM =</span> <span class="st">`</span><span class="at">Logit std.error</span><span class="st">`</span>,</span>
<span id="cb89-197"><a href="#cb89-197" aria-hidden="true" tabindex="-1"></a>         <span class="at">recoveryScore =</span> <span class="st">`</span><span class="at">Logit score</span><span class="st">`</span>,</span>
<span id="cb89-198"><a href="#cb89-198" aria-hidden="true" tabindex="-1"></a>         <span class="at">recoverySumScore =</span> <span class="st">`</span><span class="at">Ordinal sum score</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-199"><a href="#cb89-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">recoveryScore =</span> <span class="fu">round</span>(recoveryScore,<span class="dv">3</span>))</span>
<span id="cb89-200"><a href="#cb89-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-201"><a href="#cb89-201" aria-hidden="true" tabindex="-1"></a>agencyTable <span class="ot">&lt;-</span> <span class="fu">RIscoreSE</span>(agencyData, <span class="at">width =</span> <span class="dv">50</span>, <span class="at">sdx =</span> <span class="dv">10</span>, <span class="at">score_range =</span> agencyRange, <span class="at">output =</span> <span class="st">"dataframe"</span>)</span>
<span id="cb89-202"><a href="#cb89-202" aria-hidden="true" tabindex="-1"></a>agencyTable <span class="ot">&lt;-</span> agencyTable <span class="sc">%&gt;%</span> </span>
<span id="cb89-203"><a href="#cb89-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">agencySEM =</span> <span class="st">`</span><span class="at">Logit std.error</span><span class="st">`</span>,</span>
<span id="cb89-204"><a href="#cb89-204" aria-hidden="true" tabindex="-1"></a>         <span class="at">agencyScore =</span> <span class="st">`</span><span class="at">Logit score</span><span class="st">`</span>,</span>
<span id="cb89-205"><a href="#cb89-205" aria-hidden="true" tabindex="-1"></a>         <span class="at">agencySumScore =</span> <span class="st">`</span><span class="at">Ordinal sum score</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-206"><a href="#cb89-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agencyScore =</span> <span class="fu">round</span>(agencyScore,<span class="dv">3</span>))</span>
<span id="cb89-207"><a href="#cb89-207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-208"><a href="#cb89-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-209"><a href="#cb89-209" aria-hidden="true" tabindex="-1"></a>Join SEM values to df based on scores</span>
<span id="cb89-210"><a href="#cb89-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-213"><a href="#cb89-213" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-214"><a href="#cb89-214" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb89-215"><a href="#cb89-215" aria-hidden="true" tabindex="-1"></a>  <span class="at">agencyScore =</span> df<span class="sc">$</span>agencyScore,</span>
<span id="cb89-216"><a href="#cb89-216" aria-hidden="true" tabindex="-1"></a>  <span class="at">recoveryScore =</span> df<span class="sc">$</span>recoveryScore</span>
<span id="cb89-217"><a href="#cb89-217" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-218"><a href="#cb89-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-219"><a href="#cb89-219" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(data,recoveryTable, <span class="at">by =</span> <span class="st">"recoveryScore"</span>)</span>
<span id="cb89-220"><a href="#cb89-220" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(data,agencyTable, <span class="at">by =</span> <span class="st">"agencyScore"</span>)</span>
<span id="cb89-221"><a href="#cb89-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-222"><a href="#cb89-222" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span>
<span id="cb89-223"><a href="#cb89-223" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-224"><a href="#cb89-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-225"><a href="#cb89-225" aria-hidden="true" tabindex="-1"></a>We have some respondents with unexpected responses and thetas outside what we have generic SEM info about. It is possible to estimate individual SEM but this has not yet been implemented in the RISEkbmRasch package and for this exercise it'll be sufficient to use those with responses that fully adhere to the expected Rasch model.</span>
<span id="cb89-226"><a href="#cb89-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-229"><a href="#cb89-229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-230"><a href="#cb89-230" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data)</span>
<span id="cb89-231"><a href="#cb89-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-232"><a href="#cb89-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-233"><a href="#cb89-233" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualizing data {#sec-viz}</span></span>
<span id="cb89-234"><a href="#cb89-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-235"><a href="#cb89-235" aria-hidden="true" tabindex="-1"></a><span class="fu">### Histograms</span></span>
<span id="cb89-236"><a href="#cb89-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-237"><a href="#cb89-237" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-238"><a href="#cb89-238" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval score</span></span>
<span id="cb89-241"><a href="#cb89-241" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-242"><a href="#cb89-242" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-243"><a href="#cb89-243" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-244"><a href="#cb89-244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"agencyScore"</span>,<span class="st">"recoveryScore"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-245"><a href="#cb89-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb89-246"><a href="#cb89-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb89-247"><a href="#cb89-247" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>name) <span class="sc">+</span></span>
<span id="cb89-248"><a href="#cb89-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>()</span>
<span id="cb89-249"><a href="#cb89-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-250"><a href="#cb89-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-251"><a href="#cb89-251" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal sum score</span></span>
<span id="cb89-254"><a href="#cb89-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-255"><a href="#cb89-255" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb89-256"><a href="#cb89-256" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-257"><a href="#cb89-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"agencySumScore"</span>,<span class="st">"recoverySumScore"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb89-258"><a href="#cb89-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb89-259"><a href="#cb89-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb89-260"><a href="#cb89-260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>name) <span class="sc">+</span></span>
<span id="cb89-261"><a href="#cb89-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>()</span>
<span id="cb89-262"><a href="#cb89-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-263"><a href="#cb89-263" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-264"><a href="#cb89-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-265"><a href="#cb89-265" aria-hidden="true" tabindex="-1"></a><span class="fu">### Measurement uncertainty</span></span>
<span id="cb89-266"><a href="#cb89-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-267"><a href="#cb89-267" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-268"><a href="#cb89-268" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Agency</span></span>
<span id="cb89-271"><a href="#cb89-271" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-272"><a href="#cb89-272" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb89-273"><a href="#cb89-273" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-274"><a href="#cb89-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-275"><a href="#cb89-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> agencySEM, </span>
<span id="cb89-276"><a href="#cb89-276" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> agencyScore)) <span class="sc">+</span></span>
<span id="cb89-277"><a href="#cb89-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-278"><a href="#cb89-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb89-279"><a href="#cb89-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">0.54</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-280"><a href="#cb89-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>() <span class="sc">+</span></span>
<span id="cb89-281"><a href="#cb89-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb89-282"><a href="#cb89-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="fu">str_wrap</span>(<span class="st">"Note. Lower SEM = improved reliability. A SEM at 0.54 (dashed line) corresponds to a reliability coefficient of 0.7 on a 0 to 1 scale. SEM = 0.45 corresponds to reliability 0.8"</span>))</span>
<span id="cb89-283"><a href="#cb89-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-284"><a href="#cb89-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-285"><a href="#cb89-285" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Recovery</span></span>
<span id="cb89-288"><a href="#cb89-288" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-289"><a href="#cb89-289" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb89-290"><a href="#cb89-290" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-291"><a href="#cb89-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-292"><a href="#cb89-292" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> recoverySEM, </span>
<span id="cb89-293"><a href="#cb89-293" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-294"><a href="#cb89-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-295"><a href="#cb89-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb89-296"><a href="#cb89-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">0.54</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-297"><a href="#cb89-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>() <span class="sc">+</span></span>
<span id="cb89-298"><a href="#cb89-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb89-299"><a href="#cb89-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="fu">str_wrap</span>(<span class="st">"Note. Lower SEM = improved reliability. A SEM at 0.54 (dashed line) corresponds to a reliability coefficient of 0.7 on a 0 to 1 scale. SEM = 0.45 corresponds to reliability 0.8"</span>))</span>
<span id="cb89-300"><a href="#cb89-300" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-301"><a href="#cb89-301" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-302"><a href="#cb89-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-303"><a href="#cb89-303" aria-hidden="true" tabindex="-1"></a><span class="fu">### Scatter plots</span></span>
<span id="cb89-304"><a href="#cb89-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-305"><a href="#cb89-305" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-306"><a href="#cb89-306" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval score </span></span>
<span id="cb89-307"><a href="#cb89-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-310"><a href="#cb89-310" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-311"><a href="#cb89-311" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-312"><a href="#cb89-312" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencyScore,</span>
<span id="cb89-313"><a href="#cb89-313" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-314"><a href="#cb89-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-315"><a href="#cb89-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb89-316"><a href="#cb89-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>()</span>
<span id="cb89-317"><a href="#cb89-317" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-318"><a href="#cb89-318" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal sum score </span></span>
<span id="cb89-321"><a href="#cb89-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-322"><a href="#cb89-322" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-323"><a href="#cb89-323" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencySumScore,</span>
<span id="cb89-324"><a href="#cb89-324" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-325"><a href="#cb89-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-326"><a href="#cb89-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb89-327"><a href="#cb89-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>()</span>
<span id="cb89-328"><a href="#cb89-328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-329"><a href="#cb89-329" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-330"><a href="#cb89-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-331"><a href="#cb89-331" aria-hidden="true" tabindex="-1"></a><span class="fu">## Relationship ordinal/interval score</span></span>
<span id="cb89-332"><a href="#cb89-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-333"><a href="#cb89-333" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-334"><a href="#cb89-334" aria-hidden="true" tabindex="-1"></a><span class="fu">### Correlation</span></span>
<span id="cb89-337"><a href="#cb89-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-338"><a href="#cb89-338" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">cor_test</span>(<span class="at">data =</span> data, <span class="at">x =</span> <span class="st">"agencySumScore"</span>, <span class="at">y =</span> <span class="st">"agencyScore"</span>))</span>
<span id="cb89-339"><a href="#cb89-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-340"><a href="#cb89-340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-341"><a href="#cb89-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-342"><a href="#cb89-342" aria-hidden="true" tabindex="-1"></a><span class="fu">### Correlation standardized</span></span>
<span id="cb89-345"><a href="#cb89-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-346"><a href="#cb89-346" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-347"><a href="#cb89-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agencySumScore =</span> <span class="fu">standardize</span>(agencySumScore),</span>
<span id="cb89-348"><a href="#cb89-348" aria-hidden="true" tabindex="-1"></a>         <span class="at">agencyScore =</span> <span class="fu">standardize</span>(agencyScore)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-349"><a href="#cb89-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor_test</span>(<span class="at">data =</span> ., <span class="at">x =</span> <span class="st">"agencySumScore"</span>, <span class="at">y =</span> <span class="st">"agencyScore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-350"><a href="#cb89-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span>
<span id="cb89-351"><a href="#cb89-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-352"><a href="#cb89-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-353"><a href="#cb89-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-354"><a href="#cb89-354" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ord/int OLS quintiles w sim data</span></span>
<span id="cb89-357"><a href="#cb89-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-358"><a href="#cb89-358" aria-hidden="true" tabindex="-1"></a><span class="fu">RIscoreSE</span>(agencyData, <span class="at">sdx =</span> <span class="dv">10</span>, <span class="at">score_range =</span> agencyRange, <span class="at">output =</span> <span class="st">"dataframe"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-359"><a href="#cb89-359" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Logit score</span><span class="st">`</span>,</span>
<span id="cb89-360"><a href="#cb89-360" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">`</span><span class="at">Ordinal sum score</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb89-361"><a href="#cb89-361" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-362"><a href="#cb89-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-363"><a href="#cb89-363" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-364"><a href="#cb89-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-365"><a href="#cb89-365" aria-hidden="true" tabindex="-1"></a><span class="fu">RIscoreSE</span>(agencyData, <span class="at">sdx =</span> <span class="dv">10</span>, <span class="at">score_range =</span> agencyRange, <span class="at">output =</span> <span class="st">"dataframe"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-366"><a href="#cb89-366" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-367"><a href="#cb89-367" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rq</span>(ordinal_sum_score <span class="sc">~</span> logit_score, </span>
<span id="cb89-368"><a href="#cb89-368" aria-hidden="true" tabindex="-1"></a>     <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-369"><a href="#cb89-369" aria-hidden="true" tabindex="-1"></a>     <span class="at">data =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb89-370"><a href="#cb89-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span>
<span id="cb89-371"><a href="#cb89-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-372"><a href="#cb89-372" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-373"><a href="#cb89-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-374"><a href="#cb89-374" aria-hidden="true" tabindex="-1"></a><span class="fu">## Standardizing predictor</span></span>
<span id="cb89-375"><a href="#cb89-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-378"><a href="#cb89-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-379"><a href="#cb89-379" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb89-380"><a href="#cb89-380" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agencySumScore =</span> <span class="fu">standardize</span>(agencySumScore),</span>
<span id="cb89-381"><a href="#cb89-381" aria-hidden="true" tabindex="-1"></a>         <span class="at">agencyScore =</span> <span class="fu">standardize</span>(agencyScore))</span>
<span id="cb89-382"><a href="#cb89-382" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-383"><a href="#cb89-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-384"><a href="#cb89-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-385"><a href="#cb89-385" aria-hidden="true" tabindex="-1"></a><span class="fu">## Weights for WLS regression</span></span>
<span id="cb89-386"><a href="#cb89-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-389"><a href="#cb89-389" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-390"><a href="#cb89-390" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-391"><a href="#cb89-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weights =</span> <span class="dv">1</span><span class="sc">/</span>agencySEM) <span class="sc">%&gt;%</span> </span>
<span id="cb89-392"><a href="#cb89-392" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agencySEM, </span>
<span id="cb89-393"><a href="#cb89-393" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> weights)) <span class="sc">+</span></span>
<span id="cb89-394"><a href="#cb89-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-395"><a href="#cb89-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>() <span class="sc">+</span></span>
<span id="cb89-396"><a href="#cb89-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>))</span>
<span id="cb89-397"><a href="#cb89-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-398"><a href="#cb89-398" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-399"><a href="#cb89-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weights =</span> <span class="dv">1</span><span class="sc">/</span>agencySEM) <span class="sc">%&gt;%</span> </span>
<span id="cb89-400"><a href="#cb89-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(weights,agencySEM) <span class="sc">%&gt;%</span> </span>
<span id="cb89-401"><a href="#cb89-401" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-402"><a href="#cb89-402" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(agencySEM) <span class="sc">%&gt;%</span> </span>
<span id="cb89-403"><a href="#cb89-403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb89-404"><a href="#cb89-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-405"><a href="#cb89-405" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-406"><a href="#cb89-406" aria-hidden="true" tabindex="-1"></a><span class="fu">## Linear regression models {#sec-lmm}</span></span>
<span id="cb89-407"><a href="#cb89-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-408"><a href="#cb89-408" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-409"><a href="#cb89-409" aria-hidden="true" tabindex="-1"></a><span class="fu">### OLS interval score</span></span>
<span id="cb89-412"><a href="#cb89-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-413"><a href="#cb89-413" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb89-414"><a href="#cb89-414" aria-hidden="true" tabindex="-1"></a>olsInt <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryScore <span class="sc">~</span> agencyScore, <span class="at">data =</span> data)</span>
<span id="cb89-415"><a href="#cb89-415" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsInt)</span>
<span id="cb89-416"><a href="#cb89-416" aria-hidden="true" tabindex="-1"></a><span class="fu">bptest</span>(olsInt)</span>
<span id="cb89-417"><a href="#cb89-417" aria-hidden="true" tabindex="-1"></a><span class="fu">dwtest</span>(olsInt)</span>
<span id="cb89-418"><a href="#cb89-418" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(olsInt)</span>
<span id="cb89-419"><a href="#cb89-419" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-420"><a href="#cb89-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-421"><a href="#cb89-421" aria-hidden="true" tabindex="-1"></a><span class="fu">### WLS interval score </span></span>
<span id="cb89-424"><a href="#cb89-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-425"><a href="#cb89-425" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb89-426"><a href="#cb89-426" aria-hidden="true" tabindex="-1"></a>wlsInt <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryScore <span class="sc">~</span> agencyScore, </span>
<span id="cb89-427"><a href="#cb89-427" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> data,</span>
<span id="cb89-428"><a href="#cb89-428" aria-hidden="true" tabindex="-1"></a>         <span class="at">weights =</span> <span class="dv">1</span><span class="sc">/</span>data<span class="sc">$</span>agencySEM)</span>
<span id="cb89-429"><a href="#cb89-429" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wlsInt)</span>
<span id="cb89-430"><a href="#cb89-430" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(wlsInt)</span>
<span id="cb89-431"><a href="#cb89-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-432"><a href="#cb89-432" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-433"><a href="#cb89-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-434"><a href="#cb89-434" aria-hidden="true" tabindex="-1"></a><span class="fu">### OLS ordinal score</span></span>
<span id="cb89-437"><a href="#cb89-437" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-438"><a href="#cb89-438" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb89-439"><a href="#cb89-439" aria-hidden="true" tabindex="-1"></a>olsOrd <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryScore <span class="sc">~</span> agencySumScore, <span class="at">data =</span> data)</span>
<span id="cb89-440"><a href="#cb89-440" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsOrd)</span>
<span id="cb89-441"><a href="#cb89-441" aria-hidden="true" tabindex="-1"></a><span class="fu">check_model</span>(olsOrd)</span>
<span id="cb89-442"><a href="#cb89-442" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-443"><a href="#cb89-443" aria-hidden="true" tabindex="-1"></a><span class="fu">### OLS int score std</span></span>
<span id="cb89-446"><a href="#cb89-446" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-447"><a href="#cb89-447" aria-hidden="true" tabindex="-1"></a>olsIntStd <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryScore <span class="sc">~</span> <span class="fu">standardize</span>(agencyScore), <span class="at">data =</span> data)</span>
<span id="cb89-448"><a href="#cb89-448" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsIntStd)</span>
<span id="cb89-449"><a href="#cb89-449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-450"><a href="#cb89-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-451"><a href="#cb89-451" aria-hidden="true" tabindex="-1"></a><span class="fu">### OLS ord score std</span></span>
<span id="cb89-454"><a href="#cb89-454" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-455"><a href="#cb89-455" aria-hidden="true" tabindex="-1"></a>olsOrdStd <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryScore <span class="sc">~</span> <span class="fu">standardize</span>(agencySumScore), <span class="at">data =</span> data)</span>
<span id="cb89-456"><a href="#cb89-456" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsOrdStd)</span>
<span id="cb89-457"><a href="#cb89-457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-458"><a href="#cb89-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-459"><a href="#cb89-459" aria-hidden="true" tabindex="-1"></a><span class="fu">### WLS int score std</span></span>
<span id="cb89-462"><a href="#cb89-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-463"><a href="#cb89-463" aria-hidden="true" tabindex="-1"></a>wlsIntStd <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryScore <span class="sc">~</span> <span class="fu">standardize</span>(agencyScore), </span>
<span id="cb89-464"><a href="#cb89-464" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> data,</span>
<span id="cb89-465"><a href="#cb89-465" aria-hidden="true" tabindex="-1"></a>         <span class="at">weights =</span> <span class="dv">1</span><span class="sc">/</span>data<span class="sc">$</span>agencySEM)</span>
<span id="cb89-466"><a href="#cb89-466" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wlsIntStd)</span>
<span id="cb89-467"><a href="#cb89-467" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-468"><a href="#cb89-468" aria-hidden="true" tabindex="-1"></a><span class="fu">### Comparison std</span></span>
<span id="cb89-471"><a href="#cb89-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-472"><a href="#cb89-472" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb89-473"><a href="#cb89-473" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"OLSinterval"</span>,<span class="st">"WLSinterval"</span>,<span class="st">"OLSordinal"</span>)</span>
<span id="cb89-474"><a href="#cb89-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-475"><a href="#cb89-475" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">tidy</span>(olsIntStd, <span class="at">conf.int =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-476"><a href="#cb89-476" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tidy</span>(wlsIntStd, <span class="at">conf.int =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-477"><a href="#cb89-477" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tidy</span>(olsOrdStd, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-478"><a href="#cb89-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">model =</span> <span class="fu">rep</span>(models, <span class="at">each =</span> <span class="dv">2</span>), <span class="at">.before =</span> <span class="st">"term"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-479"><a href="#cb89-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">3</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb89-480"><a href="#cb89-480" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(term) <span class="sc">%&gt;%</span> </span>
<span id="cb89-481"><a href="#cb89-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl_rise</span>()</span>
<span id="cb89-482"><a href="#cb89-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-483"><a href="#cb89-483" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">glance</span>(olsIntStd),</span>
<span id="cb89-484"><a href="#cb89-484" aria-hidden="true" tabindex="-1"></a>      <span class="fu">glance</span>(wlsIntStd),</span>
<span id="cb89-485"><a href="#cb89-485" aria-hidden="true" tabindex="-1"></a>      <span class="fu">glance</span>(olsOrdStd)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-486"><a href="#cb89-486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">model =</span> <span class="fu">rep</span>(models, <span class="at">each =</span> <span class="dv">1</span>), <span class="at">.before =</span> <span class="st">"r.squared"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-487"><a href="#cb89-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">3</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb89-488"><a href="#cb89-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl_rise</span>()</span>
<span id="cb89-489"><a href="#cb89-489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-490"><a href="#cb89-490" aria-hidden="true" tabindex="-1"></a><span class="fu">### Comparison unstd</span></span>
<span id="cb89-491"><a href="#cb89-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-494"><a href="#cb89-494" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-495"><a href="#cb89-495" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb89-496"><a href="#cb89-496" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"OLSinterval"</span>,<span class="st">"WLSinterval"</span>,<span class="st">"OLSordinal"</span>)</span>
<span id="cb89-497"><a href="#cb89-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-498"><a href="#cb89-498" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">tidy</span>(olsInt, <span class="at">conf.int =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-499"><a href="#cb89-499" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tidy</span>(wlsInt, <span class="at">conf.int =</span> <span class="cn">TRUE</span>),</span>
<span id="cb89-500"><a href="#cb89-500" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tidy</span>(olsOrd, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-501"><a href="#cb89-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">model =</span> <span class="fu">rep</span>(models, <span class="at">each =</span> <span class="dv">2</span>), <span class="at">.before =</span> <span class="st">"term"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-502"><a href="#cb89-502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">3</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb89-503"><a href="#cb89-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(term) <span class="sc">%&gt;%</span> </span>
<span id="cb89-504"><a href="#cb89-504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl_rise</span>()</span>
<span id="cb89-505"><a href="#cb89-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-506"><a href="#cb89-506" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">glance</span>(olsInt),</span>
<span id="cb89-507"><a href="#cb89-507" aria-hidden="true" tabindex="-1"></a>      <span class="fu">glance</span>(wlsInt),</span>
<span id="cb89-508"><a href="#cb89-508" aria-hidden="true" tabindex="-1"></a>      <span class="fu">glance</span>(olsOrd)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-509"><a href="#cb89-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">model =</span> <span class="fu">rep</span>(models, <span class="at">each =</span> <span class="dv">1</span>), <span class="at">.before =</span> <span class="st">"r.squared"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-510"><a href="#cb89-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">round</span>(.x, <span class="dv">3</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb89-511"><a href="#cb89-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl_rise</span>()</span>
<span id="cb89-512"><a href="#cb89-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-513"><a href="#cb89-513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-514"><a href="#cb89-514" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-515"><a href="#cb89-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-516"><a href="#cb89-516" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quantile regression scatter plots</span></span>
<span id="cb89-517"><a href="#cb89-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-518"><a href="#cb89-518" aria-hidden="true" tabindex="-1"></a>I haven't figured out how to make ggplot use weighted model, so these are only unweighted.</span>
<span id="cb89-519"><a href="#cb89-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-520"><a href="#cb89-520" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-521"><a href="#cb89-521" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval OLS quartiles</span></span>
<span id="cb89-524"><a href="#cb89-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-525"><a href="#cb89-525" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-526"><a href="#cb89-526" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencyScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-527"><a href="#cb89-527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-528"><a href="#cb89-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-529"><a href="#cb89-529" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-530"><a href="#cb89-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-531"><a href="#cb89-531" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal OLS quartiles</span></span>
<span id="cb89-534"><a href="#cb89-534" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-535"><a href="#cb89-535" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-536"><a href="#cb89-536" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencySumScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-537"><a href="#cb89-537" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-538"><a href="#cb89-538" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-539"><a href="#cb89-539" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-540"><a href="#cb89-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-541"><a href="#cb89-541" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval OLS quintiles</span></span>
<span id="cb89-544"><a href="#cb89-544" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-545"><a href="#cb89-545" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-546"><a href="#cb89-546" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencyScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-547"><a href="#cb89-547" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-548"><a href="#cb89-548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-549"><a href="#cb89-549" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-550"><a href="#cb89-550" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-551"><a href="#cb89-551" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal OLS quintiles</span></span>
<span id="cb89-554"><a href="#cb89-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-555"><a href="#cb89-555" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-556"><a href="#cb89-556" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencySumScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-557"><a href="#cb89-557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-558"><a href="#cb89-558" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-559"><a href="#cb89-559" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-560"><a href="#cb89-560" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-561"><a href="#cb89-561" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal/interval OLS quintiles</span></span>
<span id="cb89-564"><a href="#cb89-564" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-565"><a href="#cb89-565" aria-hidden="true" tabindex="-1"></a>pointSize <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb89-566"><a href="#cb89-566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(agencyScore)</span>
<span id="cb89-567"><a href="#cb89-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-568"><a href="#cb89-568" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-569"><a href="#cb89-569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,pointSize, <span class="at">by =</span> <span class="st">"agencyScore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-570"><a href="#cb89-570" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agencyScore, <span class="at">y =</span> agencySumScore)) <span class="sc">+</span></span>
<span id="cb89-571"><a href="#cb89-571" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> n)) <span class="sc">+</span></span>
<span id="cb89-572"><a href="#cb89-572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-573"><a href="#cb89-573" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-574"><a href="#cb89-574" aria-hidden="true" tabindex="-1"></a>                <span class="co">#color = c("blue","red","orange","pink")) # add coloring to lines</span></span>
<span id="cb89-575"><a href="#cb89-575" aria-hidden="true" tabindex="-1"></a>                <span class="co">#linetype = c("dotted", "dashed", "solid", "dashed"))</span></span>
<span id="cb89-576"><a href="#cb89-576" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-577"><a href="#cb89-577" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-578"><a href="#cb89-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-579"><a href="#cb89-579" aria-hidden="true" tabindex="-1"></a><span class="fu">## Quantile regression</span></span>
<span id="cb89-580"><a href="#cb89-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-581"><a href="#cb89-581" aria-hidden="true" tabindex="-1"></a>We can use any set of quantiles using the <span class="in">`tau`</span> option. Here, we choose 0.25, 0.5, and 0.75. Tau = 0.5 is the same as "median regression".</span>
<span id="cb89-582"><a href="#cb89-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-583"><a href="#cb89-583" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualization</span></span>
<span id="cb89-584"><a href="#cb89-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-587"><a href="#cb89-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-588"><a href="#cb89-588" aria-hidden="true" tabindex="-1"></a>dviz <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb89-589"><a href="#cb89-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">id =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(data), <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-590"><a href="#cb89-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">"agencyScore"</span>,<span class="st">"recoveryScore"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-591"><a href="#cb89-591" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span></span>
<span id="cb89-592"><a href="#cb89-592" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">qgroup =</span> <span class="fu">case_when</span>(value <span class="sc">&lt;</span> <span class="fu">quantile</span>(value, <span class="at">probs =</span> .<span class="dv">25</span>) <span class="sc">~</span> <span class="st">"lower"</span>,</span>
<span id="cb89-593"><a href="#cb89-593" aria-hidden="true" tabindex="-1"></a>                            value <span class="sc">&gt;=</span> <span class="fu">quantile</span>(value, <span class="at">probs =</span> .<span class="dv">25</span>) <span class="sc">&amp;</span> value <span class="sc">&lt;</span> <span class="fu">quantile</span>(value, <span class="at">probs =</span> .<span class="dv">75</span>) <span class="sc">~</span> <span class="st">"middle"</span>,</span>
<span id="cb89-594"><a href="#cb89-594" aria-hidden="true" tabindex="-1"></a>                            value <span class="sc">&gt;=</span> <span class="fu">quantile</span>(value, <span class="at">probs =</span> .<span class="dv">75</span>) <span class="sc">~</span> <span class="st">"upper"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-595"><a href="#cb89-595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb89-596"><a href="#cb89-596" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="st">"id"</span>, </span>
<span id="cb89-597"><a href="#cb89-597" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> <span class="st">"name"</span>, </span>
<span id="cb89-598"><a href="#cb89-598" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="fu">c</span>(<span class="st">"value"</span>,<span class="st">"qgroup"</span>))</span>
<span id="cb89-599"><a href="#cb89-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-600"><a href="#cb89-600" aria-hidden="true" tabindex="-1"></a>dviz <span class="sc">%&gt;%</span></span>
<span id="cb89-601"><a href="#cb89-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb89-602"><a href="#cb89-602" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> value_agencyScore,</span>
<span id="cb89-603"><a href="#cb89-603" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> value_recoveryScore,</span>
<span id="cb89-604"><a href="#cb89-604" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> qgroup_recoveryScore</span>
<span id="cb89-605"><a href="#cb89-605" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb89-606"><a href="#cb89-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-607"><a href="#cb89-607" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_rise</span>() <span class="sc">+</span></span>
<span id="cb89-608"><a href="#cb89-608" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">type =</span> <span class="st">"qual"</span>, <span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb89-609"><a href="#cb89-609" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb89-610"><a href="#cb89-610" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Agency Score"</span>,</span>
<span id="cb89-611"><a href="#cb89-611" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Recovery Score"</span>)</span>
<span id="cb89-612"><a href="#cb89-612" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-613"><a href="#cb89-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-614"><a href="#cb89-614" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quantile regression scatter plots</span></span>
<span id="cb89-615"><a href="#cb89-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-616"><a href="#cb89-616" aria-hidden="true" tabindex="-1"></a>I haven't figured out how to make ggplot use weighted model (WLS), so these are only unweighted.</span>
<span id="cb89-617"><a href="#cb89-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-618"><a href="#cb89-618" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-619"><a href="#cb89-619" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval OLS quartiles</span></span>
<span id="cb89-622"><a href="#cb89-622" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-623"><a href="#cb89-623" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-624"><a href="#cb89-624" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencyScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-625"><a href="#cb89-625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-626"><a href="#cb89-626" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-627"><a href="#cb89-627" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-628"><a href="#cb89-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-629"><a href="#cb89-629" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal OLS quartiles</span></span>
<span id="cb89-632"><a href="#cb89-632" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-633"><a href="#cb89-633" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-634"><a href="#cb89-634" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencySumScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-635"><a href="#cb89-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-636"><a href="#cb89-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-637"><a href="#cb89-637" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-638"><a href="#cb89-638" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-639"><a href="#cb89-639" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval OLS quintiles</span></span>
<span id="cb89-642"><a href="#cb89-642" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-643"><a href="#cb89-643" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-644"><a href="#cb89-644" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencyScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-645"><a href="#cb89-645" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-646"><a href="#cb89-646" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-647"><a href="#cb89-647" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-648"><a href="#cb89-648" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-649"><a href="#cb89-649" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal OLS quintiles</span></span>
<span id="cb89-652"><a href="#cb89-652" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-653"><a href="#cb89-653" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data,</span>
<span id="cb89-654"><a href="#cb89-654" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> agencySumScore, <span class="at">y =</span> recoveryScore)) <span class="sc">+</span></span>
<span id="cb89-655"><a href="#cb89-655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-656"><a href="#cb89-656" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-657"><a href="#cb89-657" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-658"><a href="#cb89-658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-659"><a href="#cb89-659" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal/interval OLS quintiles</span></span>
<span id="cb89-662"><a href="#cb89-662" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-663"><a href="#cb89-663" aria-hidden="true" tabindex="-1"></a>pointSize <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb89-664"><a href="#cb89-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(agencyScore)</span>
<span id="cb89-665"><a href="#cb89-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-666"><a href="#cb89-666" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb89-667"><a href="#cb89-667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(.,pointSize, <span class="at">by =</span> <span class="st">"agencyScore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-668"><a href="#cb89-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> agencyScore, <span class="at">y =</span> agencySumScore)) <span class="sc">+</span></span>
<span id="cb89-669"><a href="#cb89-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> n)) <span class="sc">+</span></span>
<span id="cb89-670"><a href="#cb89-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-671"><a href="#cb89-671" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"rq"</span>)</span>
<span id="cb89-672"><a href="#cb89-672" aria-hidden="true" tabindex="-1"></a>                <span class="co">#color = c("blue","red","orange","pink")) # add coloring to lines</span></span>
<span id="cb89-673"><a href="#cb89-673" aria-hidden="true" tabindex="-1"></a>                <span class="co">#linetype = c("dotted", "dashed", "solid", "dashed"))</span></span>
<span id="cb89-674"><a href="#cb89-674" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-675"><a href="#cb89-675" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-676"><a href="#cb89-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-677"><a href="#cb89-677" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quartiles</span></span>
<span id="cb89-678"><a href="#cb89-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-679"><a href="#cb89-679" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-680"><a href="#cb89-680" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval </span></span>
<span id="cb89-683"><a href="#cb89-683" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-684"><a href="#cb89-684" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb89-685"><a href="#cb89-685" aria-hidden="true" tabindex="-1"></a>olsIntQ <span class="ot">&lt;-</span> <span class="fu">rq</span>(recoveryScore <span class="sc">~</span> agencyScore, </span>
<span id="cb89-686"><a href="#cb89-686" aria-hidden="true" tabindex="-1"></a>              <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-687"><a href="#cb89-687" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> data2)</span>
<span id="cb89-688"><a href="#cb89-688" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsIntQ)</span>
<span id="cb89-689"><a href="#cb89-689" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-690"><a href="#cb89-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-691"><a href="#cb89-691" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval weighted</span></span>
<span id="cb89-694"><a href="#cb89-694" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-695"><a href="#cb89-695" aria-hidden="true" tabindex="-1"></a>wlsIntQ <span class="ot">&lt;-</span> <span class="fu">rq</span>(recoveryScore <span class="sc">~</span> agencyScore, </span>
<span id="cb89-696"><a href="#cb89-696" aria-hidden="true" tabindex="-1"></a>              <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-697"><a href="#cb89-697" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> data2,</span>
<span id="cb89-698"><a href="#cb89-698" aria-hidden="true" tabindex="-1"></a>              <span class="at">weights =</span> <span class="dv">1</span><span class="sc">/</span>data<span class="sc">$</span>agencySEM)</span>
<span id="cb89-699"><a href="#cb89-699" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wlsIntQ)</span>
<span id="cb89-700"><a href="#cb89-700" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-701"><a href="#cb89-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-702"><a href="#cb89-702" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal</span></span>
<span id="cb89-705"><a href="#cb89-705" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-706"><a href="#cb89-706" aria-hidden="true" tabindex="-1"></a>olsOrdQ <span class="ot">&lt;-</span> <span class="fu">rq</span>(recoveryScore <span class="sc">~</span> agencySumScore, </span>
<span id="cb89-707"><a href="#cb89-707" aria-hidden="true" tabindex="-1"></a>              <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>),</span>
<span id="cb89-708"><a href="#cb89-708" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> data2)</span>
<span id="cb89-709"><a href="#cb89-709" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsOrdQ)</span>
<span id="cb89-710"><a href="#cb89-710" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-711"><a href="#cb89-711" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-712"><a href="#cb89-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-713"><a href="#cb89-713" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quartile parameter plots</span></span>
<span id="cb89-714"><a href="#cb89-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-715"><a href="#cb89-715" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-716"><a href="#cb89-716" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval OLS</span></span>
<span id="cb89-719"><a href="#cb89-719" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-720"><a href="#cb89-720" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">parameters</span>(olsIntQ)) <span class="sc">+</span></span>
<span id="cb89-721"><a href="#cb89-721" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-722"><a href="#cb89-722" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-723"><a href="#cb89-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"OLS quantile regression with interval predictor"</span>,</span>
<span id="cb89-724"><a href="#cb89-724" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span>) <span class="sc">+</span></span>
<span id="cb89-725"><a href="#cb89-725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.2</span>))</span>
<span id="cb89-726"><a href="#cb89-726" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-727"><a href="#cb89-727" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval WLS</span></span>
<span id="cb89-730"><a href="#cb89-730" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-731"><a href="#cb89-731" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">parameters</span>(wlsIntQ)) <span class="sc">+</span></span>
<span id="cb89-732"><a href="#cb89-732" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-733"><a href="#cb89-733" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-734"><a href="#cb89-734" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"WLS quantile regression with interval predictor"</span>,</span>
<span id="cb89-735"><a href="#cb89-735" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span>) <span class="sc">+</span></span>
<span id="cb89-736"><a href="#cb89-736" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.2</span>))</span>
<span id="cb89-737"><a href="#cb89-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-738"><a href="#cb89-738" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal OLS</span></span>
<span id="cb89-741"><a href="#cb89-741" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-742"><a href="#cb89-742" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">parameters</span>(olsOrdQ)) <span class="sc">+</span></span>
<span id="cb89-743"><a href="#cb89-743" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-744"><a href="#cb89-744" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-745"><a href="#cb89-745" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"OLS quantile regression with ordinal sum score predictor"</span>,</span>
<span id="cb89-746"><a href="#cb89-746" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Note. Dashed line indicates 0.25."</span>) <span class="sc">+</span></span>
<span id="cb89-747"><a href="#cb89-747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.2</span>))</span>
<span id="cb89-748"><a href="#cb89-748" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-749"><a href="#cb89-749" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-750"><a href="#cb89-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-751"><a href="#cb89-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-752"><a href="#cb89-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-753"><a href="#cb89-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-754"><a href="#cb89-754" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quintiles</span></span>
<span id="cb89-755"><a href="#cb89-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-756"><a href="#cb89-756" aria-hidden="true" tabindex="-1"></a>We need to generate simulated data since variation is low in this dataset.</span>
<span id="cb89-757"><a href="#cb89-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-760"><a href="#cb89-760" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-761"><a href="#cb89-761" aria-hidden="true" tabindex="-1"></a><span class="co"># get item parameters for both</span></span>
<span id="cb89-762"><a href="#cb89-762" aria-hidden="true" tabindex="-1"></a><span class="co"># generate correlated vectors of thetas, one for each variable</span></span>
<span id="cb89-763"><a href="#cb89-763" aria-hidden="true" tabindex="-1"></a><span class="co"># https://cran.r-project.org/web/packages/faux/vignettes/rnorm_multi.html</span></span>
<span id="cb89-764"><a href="#cb89-764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-765"><a href="#cb89-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-766"><a href="#cb89-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-767"><a href="#cb89-767" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-768"><a href="#cb89-768" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval </span></span>
<span id="cb89-771"><a href="#cb89-771" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-772"><a href="#cb89-772" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb89-773"><a href="#cb89-773" aria-hidden="true" tabindex="-1"></a>olsIntQ <span class="ot">&lt;-</span> <span class="fu">rq</span>(recoveryScore <span class="sc">~</span> agencyScore, </span>
<span id="cb89-774"><a href="#cb89-774" aria-hidden="true" tabindex="-1"></a>              <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-775"><a href="#cb89-775" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> data2)</span>
<span id="cb89-776"><a href="#cb89-776" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsIntQ)</span>
<span id="cb89-777"><a href="#cb89-777" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-778"><a href="#cb89-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-779"><a href="#cb89-779" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval weighted</span></span>
<span id="cb89-782"><a href="#cb89-782" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-783"><a href="#cb89-783" aria-hidden="true" tabindex="-1"></a>wlsIntQ <span class="ot">&lt;-</span> <span class="fu">rq</span>(recoveryScore <span class="sc">~</span> agencyScore, </span>
<span id="cb89-784"><a href="#cb89-784" aria-hidden="true" tabindex="-1"></a>              <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-785"><a href="#cb89-785" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> data2,</span>
<span id="cb89-786"><a href="#cb89-786" aria-hidden="true" tabindex="-1"></a>              <span class="at">weights =</span> <span class="dv">1</span><span class="sc">/</span>data<span class="sc">$</span>agencySEM)</span>
<span id="cb89-787"><a href="#cb89-787" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(wlsIntQ)</span>
<span id="cb89-788"><a href="#cb89-788" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-789"><a href="#cb89-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-790"><a href="#cb89-790" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal</span></span>
<span id="cb89-793"><a href="#cb89-793" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-794"><a href="#cb89-794" aria-hidden="true" tabindex="-1"></a>olsOrdQ <span class="ot">&lt;-</span> <span class="fu">rq</span>(recoveryScore <span class="sc">~</span> agencySumScore, </span>
<span id="cb89-795"><a href="#cb89-795" aria-hidden="true" tabindex="-1"></a>              <span class="at">tau =</span> <span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.4</span>,<span class="fl">0.6</span>,<span class="fl">0.8</span>),</span>
<span id="cb89-796"><a href="#cb89-796" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> data2)</span>
<span id="cb89-797"><a href="#cb89-797" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(olsOrdQ)</span>
<span id="cb89-798"><a href="#cb89-798" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-799"><a href="#cb89-799" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-800"><a href="#cb89-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-801"><a href="#cb89-801" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quintile parameter plots</span></span>
<span id="cb89-802"><a href="#cb89-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-803"><a href="#cb89-803" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-804"><a href="#cb89-804" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval OLS</span></span>
<span id="cb89-807"><a href="#cb89-807" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-808"><a href="#cb89-808" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">parameters</span>(olsIntQ)) <span class="sc">+</span></span>
<span id="cb89-809"><a href="#cb89-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-810"><a href="#cb89-810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-811"><a href="#cb89-811" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"OLS quantile regression with interval predictor"</span>,</span>
<span id="cb89-812"><a href="#cb89-812" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span>) <span class="sc">+</span></span>
<span id="cb89-813"><a href="#cb89-813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.2</span>))</span>
<span id="cb89-814"><a href="#cb89-814" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-815"><a href="#cb89-815" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interval WLS</span></span>
<span id="cb89-818"><a href="#cb89-818" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-819"><a href="#cb89-819" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">parameters</span>(wlsIntQ)) <span class="sc">+</span></span>
<span id="cb89-820"><a href="#cb89-820" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-821"><a href="#cb89-821" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-822"><a href="#cb89-822" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"WLS quantile regression with interval predictor"</span>,</span>
<span id="cb89-823"><a href="#cb89-823" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Note. Dashed lines indicate 0.75 and 1.0."</span>) <span class="sc">+</span></span>
<span id="cb89-824"><a href="#cb89-824" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.2</span>))</span>
<span id="cb89-825"><a href="#cb89-825" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-826"><a href="#cb89-826" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Ordinal OLS</span></span>
<span id="cb89-829"><a href="#cb89-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-830"><a href="#cb89-830" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">parameters</span>(olsOrdQ)) <span class="sc">+</span></span>
<span id="cb89-831"><a href="#cb89-831" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.75</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-832"><a href="#cb89-832" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb89-833"><a href="#cb89-833" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"OLS quantile regression with ordinal sum score predictor"</span>,</span>
<span id="cb89-834"><a href="#cb89-834" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Note. Dashed line indicates 0.25."</span>) <span class="sc">+</span></span>
<span id="cb89-835"><a href="#cb89-835" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">1.2</span>))</span>
<span id="cb89-836"><a href="#cb89-836" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-837"><a href="#cb89-837" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb89-838"><a href="#cb89-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-839"><a href="#cb89-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-840"><a href="#cb89-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-841"><a href="#cb89-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-842"><a href="#cb89-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-843"><a href="#cb89-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-844"><a href="#cb89-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-845"><a href="#cb89-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-846"><a href="#cb89-846" aria-hidden="true" tabindex="-1"></a><span class="fu">### Plot predicted</span></span>
<span id="cb89-847"><a href="#cb89-847" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb89-848"><a href="#cb89-848" aria-hidden="true" tabindex="-1"></a>####</span>
<span id="cb89-851"><a href="#cb89-851" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-852"><a href="#cb89-852" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-853"><a href="#cb89-853" aria-hidden="true" tabindex="-1"></a>####</span>
<span id="cb89-856"><a href="#cb89-856" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb89-857"><a href="#cb89-857" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb89-858"><a href="#cb89-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-859"><a href="#cb89-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-860"><a href="#cb89-860" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>